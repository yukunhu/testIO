webpackJsonp([3],{"2s5e":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,i=t("4YfN"),o=(a=i)&&a.__esModule?a:{default:a},r=t("R4Sj");var s=t("VSB1").yx.classArr;n.default={name:"insuranceClassDrop",props:{index:{default:0},itemdata:{}},components:{},data:function(){return{indeterminate:!0,checkAll:!1,checkAllGroup:[],classDict:[],financeCodeConfig:[],isRequireFinanceCode:[]}},computed:(0,o.default)({},(0,r.mapState)("apply",["orderData"]),{obj:function(){return this.itemdata},checkAllGroupText:function(){var e=this,n=[];return this.checkAllGroup.forEach(function(t){var a=e.classDict.find(function(e){return e.dictCode==t});a&&n.push(a.dictName)}),n.join("，")}}),mounted:function(){var e=this;this.financeCodeConfig=this.itemdata.financeCodeConfigArr,this.isRequireFinanceCode=this.itemdata.isRequireFinanceCodeArr;var n=s[parseInt(this.itemdata.period)-1];this.isRequireFinanceCode.forEach(function(n){e.itemdata.financeCode.indexOf(n)<0&&e.itemdata.financeCode.push(n)}),this.classDict=_.map(n,function(n){return n.disabled=-1==e.financeCodeConfig.indexOf(n.dictCode)||e.isRequireFinanceCode.indexOf(n.dictCode)>-1,n}),this.checkAllGroup=this.itemdata.financeCode,this.checkAllGroupChange(this.checkAllGroup,!0)},methods:{checkAllGroupChange:function(e,n){var t=s[parseInt(this.itemdata.period)-1].filter(function(e){return 0==e.disabled});e.length>0&&e.length===t.length?(this.indeterminate=!1,this.checkAll=!0):e.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1),n||this.change()},handleCheckAll:function(e){var n=this;if(this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll){var t=this.classDict.filter(function(e){return!e.disabled||n.isRequireFinanceCode.indexOf(e.dictCode)>-1});this.checkAllGroup=t.map(function(e){return e.dictCode})}else{t=this.classDict.filter(function(e){return n.isRequireFinanceCode.indexOf(e.dictCode)>-1});this.checkAllGroup=t.map(function(e){return e.dictCode})}this.change()},close:function(){this.$emit("on-close")},change:function(){var e=this;this.$nextTick(function(){e.$emit("on-change",{i:e.index,financeCode:e.checkAllGroup,financeCodeText:e.checkAllGroupText})})}}}},"3drL":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=c(t("rVsN")),i=(t("R4Sj"),c(t("VfUO"))),o=t("VSB1"),r=t("ZgZx"),s=c(t("iClD"));function c(e){return e&&e.__esModule?e:{default:e}}var l=o.yx.classArr;n.default={name:"itemInfo",mixins:[i.default],props:{},components:{},data:function(){return{visible:!1,inited:!1,showDrop:void 0,showClassDrop:void 0,DICT_whetherIns:[],DICT_whetherTheft:[],DICT_theftIncreaseType:[],DICT_gpsIncreaseFinanceType:[],theftTotalLimit:"",isInputPrice:o.yx.isInputPrice,isPickerPrice:o.yx.isPickerPrice,isRatioPrice:o.yx.isRatioPrice,formatAmount:s.default.number,gpsIncreaseIncreasePriceDisabled:!1,DICT_isGif:[{dictCode:"0",dictName:"否"},{dictCode:"1",dictName:"是"}]}},watch:{isOnline:{handler:function(e,n){e||(this.theftInsuranceInfo.isGift="")}}},computed:{isTheftItemDisabled:function(){var e=o.yx.isTheftItemDisabled(this.orderData.loan);return e&&this.theftInsuranceInfo&&(this.theftInsuranceInfo.isFinanceInsurance="0"),e},isGpsIncreaseItemDisabled:function(){return o.yx.isGpsIncreaseItemDisabled(this.orderData.loan)},isOnline:function(){return"030100000"===this.orderData.loan.baseInfo.custPrimaryChannel},createAmountRule:function(){var e=this;return function(n){var t=e.insuranceInfo.insuranceItemList[n],a=(t.isRequireFinanceCodeArr,[]),i=(e.insuranceInfo.insuranceChannel,o.yx.isEmpty(t.insurancMinPrice)?0:parseFloat(t.insurancMinPrice||0)),r=o.yx.isEmpty(t.insuranceMaxPrice)?"":parseFloat(t.insuranceMaxPrice||0),s=e.isHasBusiIns(t),c="1"==e.insuranceInfo.isFinanceInsurance&&0==n;return a.push({validator:function(t,a,l){var u=e.yearName(n)+"保险金额";o.yx.isEmpty(a)?s||c?l(new Error(u+"不能为空")):l():s?o.yx.amountReg.test(a)?parseFloat(a)<=0?l(new Error(u+"必须大于0")):!o.yx.isEmpty(i)&&parseFloat(a)<i?l(new Error(u+"只能输入"+i+"-"+r)):!o.yx.isEmpty(r)&&parseFloat(a)>r?l(new Error(u+"只能输入"+i+"-"+r)):String(a).length>12?l(new Error(u+"不能超过12位")):l():l(new Error(u+"填写错误")):l()},trigger:"change"}),a}},createTheftIncreasePriceRule:function(){var e={financeName:"盗抢责任险加价",isRequire:!1,financeType:this.theftInsuranceInfo.increasePriceType,financePriceMax:this.calcTheftTotalLimit()-this.calcTheftBasePrice(),financePriceMin:0},n=[],t="1"==e.isRequire,a=o.yx.isEmpty(e.financePriceMin)?0:parseFloat(e.financePriceMin||0),i=o.yx.isEmpty(e.financePriceMax)?"":parseFloat(e.financePriceMax||0);return n.push((0,r.amountValidator)("盗抢责任险加价",t,i,a)),n},isGift:function(){return!(!this.isBuyTheftInsurance||!(this.isOnline&&"0"==this.theftInsuranceInfo.isGift||!this.isOnline&&this.isBuyTheftInsurance))}},mounted:function(){var e=this;this.queryDictData(["whether","theftIncreasedType","billingPlace","insuranceMode","insuranceTypes"]).then(function(n){e.DICT_whetherIns=n.whether,e.DICT_whetherTheft=n.whether,e.DICT_theftIncreaseType=n.theftIncreasedType,e.DICT_gpsIncreaseFinanceType=n.theftIncreasedType,e.queryInitData("itemInfo",function(){if(e.gpsInfo&&"04970000"==e.orderData.orderinfo.channelOneLevel&&(e.DICT_gpsIncreaseFinanceType=e.dp.theftIncreasedType.filter(function(e){return"1"!=e.dictCode})),e.theftInsuranceInfo&&"04970000"==e.orderData.orderinfo.channelOneLevel&&(e.DICT_theftIncreaseType=e.dp.theftIncreasedType.filter(function(e){return"1"!=e.dictCode})),e.theftInsuranceInfo&&e.updateTheftBasePrice(),e.otherFinanceInfo){var n=e.otherFinanceInfo.findIndex(function(n){return e.isGpsIncreaseBasePriceCode(n.financeCode)});n>-1&&e.handleGpsIncreaseBasePriceChange(n)}e.$nextTick(function(){e.todoRecount(),e.inited=!0})})})},methods:{createItemPlaceholder:function(e,n){return e&&n?e+"~"+n:"请输入"},isDisabledItem:function(e){var n=e.financeCode;return o.yx.isCarItemCode(n)},isGpsIncreaseBasePriceCode:function(e){return o.yx.isGpsIncreaseBasePriceCode(e)},isGpsIncreaseIncreasePriceCode:function(e){return o.yx.isGpsIncreaseIncreasePriceCode(e)},toUpper:function(e){return String(e).toUpperCase()},todoInsuranceInfoSwitch:function(){var e=this,n=this.insuranceInfo,t=this.financePeriodYear;return"1"!=n.isFinanceInsurance&&(n.insuranceChannel="",n.insuranceMode=""),_.each(n.insuranceItemList,function(a){var i=e.isHasBusiIns(a);"1"!=n.isFinanceInsurance||_.isEmpty(a.isRequireFinanceCode)&&parseInt(a.period||0)>t?(a.financeCode="string"==typeof a.financeCode?a.financeCode.split(","):a.financeCode||[],a.insuranceKind="string"==typeof a.insuranceKind?a.insuranceKind.split(","):a.insuranceKind||[],a.insuranceAmount=0):1!=a.financeCode.length||i?i||a.insuranceKind.splice(0):(a.insuranceKind.splice(0),a.insuranceAmount=(0,o.stringToNumber)(e.baseInfo.carVesselCompulsoryInsurancePrice))}),n},createClassRule:function(e){var n=this,t=this.insuranceInfo.insuranceItemList[e],a=[],i="1"==this.insuranceInfo.isFinanceInsurance&&0==e,o=t.isRequireFinanceCodeArr;return a.push({validator:function(t,a,r){var s=n.yearName(e);if(o.length>a.length){var c=[];o.forEach(function(e){a.indexOf(e)<0&&c.push(e)});var u=[];l[e].forEach(function(e){c.indexOf(e.dictCode)>-1&&u.push(e.dictName)});var f=u.join(",");r(new Error(s+f+"必融"))}else i&&!a.length?r(new Error(s+"保险必融")):r()},trigger:"change"}),a},createKindRule:function(e){var n=this,t=this.insuranceInfo.insuranceItemList[e],a=[];return this.isHasBusiIns(t,e)&&a.push({type:"array",validator:function(t,a,i){var o=n.yearName(e)+"";0==a.length?i(new Error(o+"险种不能为空")):i()},trigger:"change"}),a},isHasBusiIns:function(e){var n=l[parseInt(e.period)-1][0].dictCode;return e.financeCode.indexOf(n)>-1},getInsuranceClassText:function(e,n){var t=[],a=this.insuranceInfo.insuranceItemList[n];return e.forEach(function(e){var n=l[parseInt(a.period)-1].find(function(n){return n.dictCode==e});n&&t.push(n.dictName)}),t.sort(function(e,n){return e>n?1:-1}),t.join("，")},getInsuranceKindText:function(e){var n=this,t=[];return e.forEach(function(e){var a=n.dp.insuranceTypes.find(function(n){return n.dictCode==e});a&&t.push(a.dictName)}),t.join("，")},yearName:function(e){var n=this.insuranceInfo.insuranceItemList[e];return"第"+["一","二","三","四","五"][e=parseInt(n.period)-1]+"年"},insuranceClassClickFn:function(e){this.showClassDrop===e?this.showClassDrop="":this.showClassDrop=e,this.showDrop=""},insuranceClassClickOutFn:function(e){this.showClassDrop=""},insuranceClassDropChange:function(e){var n=this,t=this.insuranceInfo.insuranceItemList[e.i];t.financeCode=e.financeCode,t.financeCodeText=e.financeCodeText,this.isHasBusiIns(t)||(t.insuranceAmount="0"),this.$nextTick(function(){n.inited&&n.handleChange(t.financeCode,"insuranceInfo.insuranceItemList."+e.i+".financeCode")})},insuranceClickFn:function(e){this.showDrop===e?this.showDrop="":this.showDrop=e,this.showClassDrop=""},insuranceClickOutFn:function(e){this.showDrop=""},insuranceDropChange:function(e){var n=this,t=this.insuranceInfo.insuranceItemList[e.i];t.insuranceKind=e.insuranceKind,t.insuranceKindText=e.insuranceKindText,this.$nextTick(function(){n.inited&&n.handleChange(t.insuranceKind,"insuranceInfo.insuranceItemList."+e.i+".insuranceKind")})},createGpsBasePriceRule:function(){var e={financeName:"GPS基础价",isRequire:this.gpsInfo.isRequireBasePrice,financeType:this.gpsInfo.basePriceType,financePriceMax:this.gpsInfo.basePriceMax,financePriceMin:this.gpsInfo.basePriceMin};return this.createRule(e)},createGpsIncreasePriceRule:function(){var e={financeName:"GPS加价金额",isRequire:this.gpsInfo.isRequireIncreasePrice,financeType:this.gpsInfo.increasePriceType,financePriceMax:this.gpsInfo.increasePriceMax,financePriceMin:this.gpsInfo.increasePriceMin};return this.createRule(e)},updateTheftBasePrice:function(){this.theftInsuranceInfo.basePrice=""+this.calcTheftBasePrice(),this.theftTotalLimit=""+this.calcTheftTotalLimit()},calcTheftBasePrice:function(){var e=this.theftInsuranceInfo.increaseFinancePeriod||0,n=this.sellingAmount||0;return 0==e||0==n?0:150+300*(Math.ceil(n/3e5)-1)+150*(parseInt(e)-1)},calcTheftTotalLimit:function(){var e=this.theftInsuranceInfo.increaseFinancePeriod||0,n=this.sellingAmount||0;return 0==e?0:500+300*(Math.ceil(n/3e5)-1)+500*(parseInt(e)-1)},handleGpsIncreaseBasePriceChange:function(e){var n=this,t=this.otherFinanceInfo[e];if(t&&this.isGpsIncreaseBasePriceCode(t.financeCode)){var a=t.financePrice,i=this.otherFinanceInfo.find(function(e){return n.isGpsIncreaseIncreasePriceCode(e.financeCode)});i&&0===(0,o.stringToNumber)(a)?o.yx.isPickerPrice(i.financeType)&&i.financeGear.find(function(e){return 0==e.value})||o.yx.isInputPrice(i.financeType)?(i.financePrice="0",this.gpsIncreaseIncreasePriceDisabled=!0):this.gpsIncreaseIncreasePriceDisabled=!1:i&&0!==(0,o.stringToNumber)(a)&&(this.gpsIncreaseIncreasePriceDisabled=!1)}},handleBlur:function(e){var n=this,t=e.target.parentNode.getAttribute("v")||e.target.parentNode.parentNode.getAttribute("v");if(!this.checkFieldIsChange("itemInfo."+t))return!1;var a=t.split(".");"otherFinanceInfo"==a[0]&&this.handleGpsIncreaseBasePriceChange(a[1]),this.$nextTick(function(){n.cacheData("itemInfo"),n.todoRecount()})},handleChange:function(e,n){var t=this;if(!this.checkFieldIsChange("itemInfo."+n))return!1;var a=n.split(".");"theftInsuranceInfo.increaseFinancePeriod"!=n&&"theftInsuranceInfo.isFinanceInsurance"!=n||this.updateTheftBasePrice(),"gpsInfo.gpsSupplier"===n&&"5"===e&&(this.theftInsuranceInfo.isGift=""),"insuranceInfo"==a[0]&&this.todoInsuranceInfoSwitch(),"otherFinanceInfo"==a[0]&&this.handleGpsIncreaseBasePriceChange(a[1]),"theftInsuranceInfo.isFinanceInsurance"===n&&(this.theftInsuranceInfo.isGift=""),this.$nextTick(function(){t.cacheData("itemInfo"),t.todoRecount()})},validate:function(e){var n=this,t=[];["insuranceInfo","gpsInfo","theftInsuranceInfo","otherFinanceInfo"].forEach(function(e){n.$refs[e]&&t.push(n.$refs[e].validate())}),a.default.all(t).then(function(n){var t=_.every(n);e&&e(t)})}}}},"6ss7":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=s(t("4YfN")),i=t("R4Sj"),o=s(t("VfUO")),r=t("VSB1");t("ZgZx");function s(e){return e&&e.__esModule?e:{default:e}}n.default={name:"orderLoanCalcForm",mixins:[o.default],props:{},components:{},data:function(){return{tailCalcMethod:""}},computed:{downPctDisabled:function(){var e=this.calcInfo.downPaymentAmount,n=this.calcInfo.downPaymentProportion;return!(""===e||null===e||""!==n&&null!==n)},downAmountDisabled:function(){var e=this.calcInfo.downPaymentAmount,n=this.calcInfo.downPaymentProportion;return(""===e||null===e)&&!(""===n||null===n)},finalPctDisabled:function(){return"3"!=this.tailCalcMethod},finalAmountDisabled:function(){return"3"!=this.tailCalcMethod},newRule:function(){var e=this;return{downPaymentAmount:[{validator:function(n,t,a){var i=t,o=e.calcInfo.downPaymentProportion;r.yx.isEmpty(i)&&r.yx.isEmpty(o)?a(new Error("首付金额和首付比例必须填一项")):r.yx.isEmpty(i)&&!r.yx.isEmpty(o)?a():r.yx.amountReg.test(t)?t>e.sellingAmount?a(new Error("首付金额不得大于销售价")):a():a(new Error("首付金额格式不对"))},trigger:"change"}],downPaymentProportion:[{validator:function(n,t,a){var i=e.calcInfo.downPaymentAmount,o=t;r.yx.isEmpty(i)&&r.yx.isEmpty(o)?a(new Error("首付金额和首付比例必须填一项")):!r.yx.isEmpty(i)&&r.yx.isEmpty(o)?a():r.yx.pctReg.test(t)?a():a(new Error("首付比例只能输入0 - 100"))},trigger:"change"}],finalPaymentAmount:[{validator:function(n,t,a){var i=t,o=e.calcInfo.finalPaymentProportion;"3"==e.tailCalcMethod&&r.yx.isEmpty(i)&&r.yx.isEmpty(o)?a(new Error("尾付金额和尾付比例必须填一项")):"1"!=e.tailCalcMethod&&"3"!=e.tailCalcMethod||!r.yx.isEmpty(i)||r.yx.isEmpty(o)?r.yx.amountReg.test(t)?t>e.sellingAmount?a(new Error("尾付金额不得大于销售价")):a():a(new Error("尾付金额格式不对")):a()},trigger:"change"}],finalPaymentProportion:[{validator:function(n,t,a){var i=e.calcInfo.finalPaymentAmount,o=t;"3"==e.tailCalcMethod&&r.yx.isEmpty(i)&&r.yx.isEmpty(o)?a(new Error("尾付金额和尾付比例必须填一项")):"2"!=e.tailCalcMethod&&"3"!=e.tailCalcMethod||r.yx.isEmpty(i)||!r.yx.isEmpty(o)?r.yx.pctReg.test(t)?a():a(new Error("尾付比例只能输入0 - 100")):a()},trigger:"change"}]}}},mounted:function(){var e=this;this.queryInitData("calcInfo",function(){e.tailCalcMethod=r.yx.getTailCalcMethod(e.calcInfo.finalPaymentType),"1"!=e.tailCalcMethod&&"2"!=e.tailCalcMethod||""===e.sellingAmount||e.updateCalcAmount(e.tailCalcMethod),e.$nextTick(function(){e.todoRecount()})})},methods:(0,a.default)({},(0,i.mapMutations)("apply",[]),{handleBlur:function(e){var n=this,t=e.target.parentNode.getAttribute("v")||e.target.parentNode.parentNode.getAttribute("v");if(!this.checkFieldIsChange(t))return!1;if("calcInfo.downPaymentAmount"==t){var a=this.calcInfo.downPaymentAmount,i=this.calcInfo.downPaymentProportion;r.yx.isEmpty(a)||r.yx.isEmpty(i)||(this.calcInfo.downPaymentProportion=""),this.$refs.calcInfo.validateField("downPaymentProportion")}if("calcInfo.downPaymentProportion"==t){var o=this.calcInfo.downPaymentAmount,s=this.calcInfo.downPaymentProportion;r.yx.isEmpty(o)||r.yx.isEmpty(s)||(this.calcInfo.downPaymentAmount=""),this.$refs.calcInfo.validateField("downPaymentAmount")}"calcInfo.finalPaymentAmount"==t&&"3"==this.tailCalcMethod&&(this.updateCalcAmount(1),this.$refs.calcInfo.validateField("finalPaymentAmount"),this.$refs.calcInfo.validateField("finalPaymentProportion")),"calcInfo.finalPaymentProportion"==t&&"3"==this.tailCalcMethod&&(this.updateCalcAmount(2),this.$refs.calcInfo.validateField("finalPaymentAmount"),this.$refs.calcInfo.validateField("finalPaymentProportion")),"calcInfo.finalPaymentAmount"==t&&"1"==this.tailCalcMethod&&this.updateCalcAmount(1),"calcInfo.finalPaymentProportion"==t&&"2"==this.tailCalcMethod&&this.updateCalcAmount(2),this.$nextTick(function(){n.cacheData("calcInfo"),n.todoRecount()})},updateCalcAmount:function(e){var n=this,t=!1;e||(t=!0);var a=this.calcInfo.downPaymentAmount,i=this.calcInfo.downPaymentProportion;if(!t||r.yx.isEmpty(a)||r.yx.isEmpty(i)||(this.calcInfo.downPaymentAmount="",this.calcInfo.downPaymentProportion=""),t&&"3"==this.tailCalcMethod&&(this.calcInfo.finalPaymentAmount="",this.calcInfo.finalPaymentProportion=""),"1"==this.tailCalcMethod||1==e){var o=(0,r.stringToNumber)(this.calcInfo.finalPaymentAmount)||0;if(0==this.sellingAmount||0==o)this.calcInfo.finalPaymentProportion="0";else{var s=(0,r.floatDiv)((0,r.floatMul)(o,100),this.sellingAmount);this.calcInfo.finalPaymentProportion=parseFloat(s.toFixed(2))}}if("2"==this.tailCalcMethod||2==e){var c=(0,r.stringToNumber)(this.calcInfo.finalPaymentProportion)||0;if(0==this.sellingAmount||0==c)this.calcInfo.finalPaymentAmount="0";else{var l=(0,r.floatMul)((0,r.floatDiv)(c,100),this.sellingAmount);this.calcInfo.finalPaymentAmount=parseFloat(l.toFixed(2))}}this.$nextTick(function(){t&&!r.yx.isEmpty(a)&&n.$refs.calcInfo.validateField("downPaymentAmount"),t&&!r.yx.isEmpty(i)&&n.$refs.calcInfo.validateField("downPaymentProportion"),t&&!r.yx.isEmpty(n.calcInfo.finalPaymentProportion)&&n.$refs.calcInfo.validateField("finalPaymentProportion"),t&&!r.yx.isEmpty(n.calcInfo.finalPaymentAmount)&&n.$refs.calcInfo.validateField("finalPaymentAmount")})},validate:function(e){this.$refs.calcInfo?this.$refs.calcInfo.validate(function(n){e&&e(n)}):e&&e(!0)}})}},"7dof":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("wWME"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,function(){return a[e]})}(o);var r=t("Ae+0"),s=t("C7Lr")(i.a,r.a,!1,null,null,null);n.default=s.exports},"86i2":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("BbAS"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,function(){return a[e]})}(o);var r=t("Ak+9"),s=t("C7Lr")(i.a,r.a,!1,null,null,null);n.default=s.exports},"Ae+0":function(e,n,t){"use strict";var a={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e.marginInfo?t("div",{staticClass:"cm-panel"},[t("h3",{staticClass:"margin-b-14"},[e._v("保证金信息")]),e._v(" "),t("Form",{ref:"marginInfo",attrs:{model:e.marginInfo,rules:e.rules.loanDepositRule,"label-width":120}},[t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"保证金金额",prop:"marginAmount",rules:e.createMarginAmountRule()}},[t("InputNumber",{attrs:{placeholder1:e.isFixedRatio?"计算后带出":e.isEditable?"请输入":"",placeholder:e.marginAmountDisabled?"计算后带出":"请输入",clearable:e.isEditable,disabled:e.marginAmountDisabled,disabled1:!e.isEditable,v:"marginInfo.marginAmount"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.marginInfo.marginAmount,callback:function(n){e.$set(e.marginInfo,"marginAmount",n)},expression:"marginInfo.marginAmount"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"保证金(%)",prop:"marginProportion",rules:e.createMarginRatioRule()}},[t("InputNumber",{attrs:{placeholder1:e.isFixedAmount?"计算后带出":e.isEditable?"请输入":"",placeholder:e.marginPctDisabled?"计算后带出":"请输入",clearable:e.isEditable,disabled:e.marginPctDisabled,disabled1:!e.isEditable,v:"marginInfo.marginProportion"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.marginInfo.marginProportion,callback:function(n){e.$set(e.marginInfo,"marginProportion",n)},expression:"marginInfo.marginProportion"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"保证金是否冲抵",prop:"marginIsOffset"}},[t("RadioGroup",{attrs:{v:"marginInfo.marginIsOffset"},model:{value:e.marginInfo.marginIsOffset,callback:function(n){e.$set(e.marginInfo,"marginIsOffset",n)},expression:"marginInfo.marginIsOffset"}},e._l(e.DICT_marginIsOffset,function(n,a){return t("Radio",{key:n.dictCode,attrs:{label:n.dictCode,disabled:""}},[t("span",[e._v(e._s(n.dictName))])])}),1)],1)],1)],1)],1)],1):e._e()])},staticRenderFns:[]};n.a=a},"Ak+9":function(e,n,t){"use strict";var a={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e.baseInfo&&(e.baseInfo.hasFeeDiscount||e.isFeeProd)&&e.feeDiscountInfo?t("div",{staticClass:"cm-panel"},[t("h3",{staticClass:"margin-b-14"},[e._v("手续费信息")]),e._v(" "),t("Form",{ref:"feeDiscountInfo",attrs:{model:e.feeDiscountInfo,"label-width":120}},[t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"手续费金额",prop:"poundageAmount"}},[t("InputNumber",{attrs:{disabled:"",placeholder:"计算后带出"},model:{value:e.feeDiscountInfo.poundageAmount,callback:function(n){e.$set(e.feeDiscountInfo,"poundageAmount",n)},expression:"feeDiscountInfo.poundageAmount"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"手续费收取方式",prop:"poundageMode"}},[t("RadioGroup",{on:{"on-change":function(n){return e.handleChange(1111,"feeDiscountInfo.customDiscountType")}},model:{value:e.feeDiscountInfo.poundageMode,callback:function(n){e.$set(e.feeDiscountInfo,"poundageMode",n)},expression:"feeDiscountInfo.poundageMode"}},e._l(e.dp.ChargeDeductMethodEnum,function(n){return t("Radio",{key:n.dictCode,attrs:{disabled:"",label:n.dictCode}},[t("span",[e._v(e._s(n.dictName))])])}),1)],1)],1)],1),e._v(" "),e.discountInfo&&e.discountInfo.hasFeeRule?t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"是否贴手续费",prop:"isDiscount"}},[t("RadioGroup",{on:{"on-change":function(n){return e.handleChange(1111,"feeDiscountInfo.isDiscount")}},model:{value:e.feeDiscountInfo.isDiscount,callback:function(n){e.$set(e.feeDiscountInfo,"isDiscount",n)},expression:"feeDiscountInfo.isDiscount"}},e._l(e.dp.whether,function(n){return t("Radio",{key:n.dictCode,attrs:{label:n.dictCode,disabled:e.allDisabled}},[t("span",[e._v(e._s(n.dictName))])])}),1)],1)],1),e._v(" "),e.isFeeDiscount&&e.isFeeDealerDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"经销商贴手续费金额",prop:"dealerDiscountAmount",rules:e.ruleNum("经销商贴手续费金额",!this.isFeeDealerDiscount)}},[t("InputNumber",{attrs:{clearable:e.isFeeDealerDiscount,disabled:e.allDisabled||!e.isFeeDealerDiscount,placeholder:e.isFeeDealerDiscount?"请输入":"不贴手续费"},on:{"on-blur":function(n){return e.handleChange(n,"feeDiscountInfo.dealerDiscountAmount")},"on-clear":function(n){return e.handleChange(n,"feeDiscountInfo.dealerDiscountAmount")}},model:{value:e.feeDiscountInfo.dealerDiscountAmount,callback:function(n){e.$set(e.feeDiscountInfo,"dealerDiscountAmount",n)},expression:"feeDiscountInfo.dealerDiscountAmount"}})],1)],1):e._e(),e._v(" "),e.isFeeDiscount&&e.isFeeManufacturerDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"厂商贴手续费类型",prop:"manufacturerDiscountAmount"}},[t("Select",{attrs:{type:"text",disabled:"3"!=e.feeDiscountMode||!e.isFeeManufacturerDiscount},on:{"on-change":function(n){e.handleChange(n,"feeDiscountInfo.customDiscountType","feeDiscountInfo")}},model:{value:e.feeType,callback:function(n){e.feeType=n},expression:"feeType"}},e._l(e.typeSelect,function(n,a){return t("Option",{key:n,attrs:{value:n}},[e._v("\n                                "+e._s(a)+"\n                            ")])}),1)],1)],1):e._e(),e._v(" "),e.isFeeDiscount&&e.isFeeManufacturerDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{ref:"feeAmount",attrs:{label:"厂商贴手续费金额",prop:"manufacturerDiscountAmount",rules:"051400000"===e.feeType?e.ruleNum("厂商贴手续费金额","3"!=this.feeDiscountMode):[]}},[t("InputNumber",{attrs:{clearable:"3"==e.feeDiscountMode,disabled:"3"!=e.feeDiscountMode||!e.isFeeManufacturerDiscount||"051400000"!==e.feeType,placeholder:"051400000"!==e.feeType?"计算后带出":e.feePlaceholder},on:{"on-blur":function(n){return e.handleChange(n,"feeDiscountInfo.manufacturerDiscountAmount")},"on-clear":function(n){return e.handleChange(n,"feeDiscountInfo.manufacturerDiscountAmount")}},model:{value:e.feeDiscountInfo.manufacturerDiscountAmount,callback:function(n){e.$set(e.feeDiscountInfo,"manufacturerDiscountAmount",n)},expression:"feeDiscountInfo.manufacturerDiscountAmount"}})],1)],1):e._e(),e._v(" "),e.isFeeDiscount&&e.isFeeManufacturerDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{ref:"feePer",attrs:{label:"厂商手续费比例(%)",prop:"ratioValue",rules:"051400001"===e.feeType?e.rulePer("厂商手续费比例",this.feeDiscountMode):[]}},[t("InputNumber",{attrs:{clearable:"3"==e.rateDiscountMode,disabled:"3"!=e.feeDiscountMode||!e.isFeeManufacturerDiscount||"051400001"!==e.feeType,placeholder:"051400001"!==e.feeType?"计算后带出":e.feePlaceholder},on:{"on-blur":function(n){return e.handleChange(n,"feeDiscountInfo.ratioValue")},"on-clear":function(n){return e.handleChange(n,"feeDiscountInfo.ratioValue")}},model:{value:e.feeDiscountInfo.ratioValue,callback:function(n){e.$set(e.feeDiscountInfo,"ratioValue",n)},expression:"feeDiscountInfo.ratioValue"}})],1)],1):e._e(),e._v(" "),e.isFeeDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"贴手续费总金额"}},[t("InputNumber",{attrs:{disabled:"",placeholder:"计算后带出"},model:{value:e.feeDiscountInfo.discountTotalAmount,callback:function(n){e.$set(e.feeDiscountInfo,"discountTotalAmount",n)},expression:"feeDiscountInfo.discountTotalAmount"}})],1)],1):e._e()],1):e._e()],1)],1):e._e(),e._v(" "),e.baseInfo&&e.baseInfo.hasRateDiscount&&e.discountInfo&&e.discountInfo.hasRateRule&&e.rateDiscountInfo?t("div",{staticClass:"cm-panel"},[t("h3",{staticClass:"margin-b-14"},[e._v("贴息信息")]),e._v(" "),t("Form",{ref:"rateDiscountInfo",attrs:{model:e.rateDiscountInfo,rules:e.rules.loanTiexiRule,"label-width":120}},[t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"是否贴息",prop:"isDiscount"}},[t("RadioGroup",{on:{"on-change":function(n){return e.handleChange(111,"rateDiscountInfo.isDiscount")}},model:{value:e.rateDiscountInfo.isDiscount,callback:function(n){e.$set(e.rateDiscountInfo,"isDiscount",n)},expression:"rateDiscountInfo.isDiscount"}},e._l(e.dp.whether,function(n){return t("Radio",{key:n.dictCode,attrs:{label:n.dictCode,disabled:e.allDisabled}},[t("span",[e._v(e._s(n.dictName))])])}),1)],1)],1),e._v(" "),e.isRateDiscount&&e.isRateDealerDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"经销商贴息金额",prop:"dealerDiscountAmount",rules:e.ruleNum("经销商贴息金额",!this.isRateDealerDiscount)}},[t("InputNumber",{attrs:{clearable:e.isRateDealerDiscount,disabled:e.allDisabled||!e.isRateDealerDiscount,placeholder:e.isRateDealerDiscount?"请输入":"不贴息"},on:{"on-blur":function(n){return e.handleChange(n,"rateDiscountInfo.dealerDiscountAmount")},"on-clear":function(n){return e.handleChange(n,"rateDiscountInfo.dealerDiscountAmount")}},model:{value:e.rateDiscountInfo.dealerDiscountAmount,callback:function(n){e.$set(e.rateDiscountInfo,"dealerDiscountAmount",n)},expression:"rateDiscountInfo.dealerDiscountAmount"}})],1)],1):e._e(),e._v(" "),e.isRateDiscount&&e.isRateManufacturerDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"厂商贴息类型"}},[t("Select",{attrs:{type:"text",disabled:"3"!=e.rateDiscountMode||!e.isRateManufacturerDiscount},on:{"on-change":function(n){e.handleChange(n,"rateDiscountInfo.customDiscountType","rateDiscountInfo")}},model:{value:e.discountType,callback:function(n){e.discountType=n},expression:"discountType"}},e._l(e.typeSelect,function(n,a){return t("Option",{key:n,attrs:{value:n}},[e._v("\n                                "+e._s(a)+"\n                            ")])}),1)],1)],1):e._e(),e._v(" "),e.isRateDiscount&&e.isRateManufacturerDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{ref:"rateAmount",attrs:{label:"厂商贴息金额",prop:"manufacturerDiscountAmount",rules:"051400000"!==e.discountType?[]:e.ruleNum("厂商贴息金额","3"!=this.rateDiscountMode)}},[t("InputNumber",{attrs:{clearable:"3"==e.rateDiscountMode,disabled:"3"!=e.rateDiscountMode||!e.isRateManufacturerDiscount||"051400000"!==e.discountType,placeholder:"051400000"!==e.discountType?"计算后带出":e.ratePlaceholder},on:{"on-blur":function(n){return e.handleChange(n,"rateDiscountInfo.manufacturerDiscountAmount")},"on-clear":function(n){return e.handleChange(n,"rateDiscountInfo.manufacturerDiscountAmount")}},model:{value:e.rateDiscountInfo.manufacturerDiscountAmount,callback:function(n){e.$set(e.rateDiscountInfo,"manufacturerDiscountAmount",n)},expression:"rateDiscountInfo.manufacturerDiscountAmount"}})],1)],1):e._e(),e._v(" "),e.isRateDiscount&&e.isRateManufacturerDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{ref:"ratePer",attrs:{label:"厂商贴息比例(%)",prop:"ratioValue",rules:"051400001"!==e.discountType?[]:e.rulePer("厂商贴息比例",this.rateDiscountMode)}},[t("InputNumber",{attrs:{clearable:"3"==e.rateDiscountMode,disabled:"3"!=e.rateDiscountMode||!e.isRateManufacturerDiscount||"051400001"!==e.discountType,placeholder:"051400001"!==e.discountType?"计算后带出":e.ratePlaceholder},on:{"on-blur":function(n){return e.handleChange(n,"rateDiscountInfo.ratioValue")},"on-clear":function(n){return e.handleChange(n,"rateDiscountInfo.ratioValue")}},model:{value:e.rateDiscountInfo.ratioValue,callback:function(n){e.$set(e.rateDiscountInfo,"ratioValue",n)},expression:"rateDiscountInfo.ratioValue"}})],1)],1):e._e(),e._v(" "),e.isRateDiscount?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"贴息总金额"}},[t("InputNumber",{attrs:{disabled:"",placeholder:"计算后带出"},model:{value:e.rateDiscountInfo.discountTotalAmount,callback:function(n){e.$set(e.rateDiscountInfo,"discountTotalAmount",n)},expression:"rateDiscountInfo.discountTotalAmount"}})],1)],1):e._e()],1)],1)],1):e._e()])},staticRenderFns:[]};n.a=a},BbAS:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=s(t("rVsN")),i=s(t("b8UR")),o=s(t("VfUO")),r=(t("VSB1"),t("ZgZx"));function s(e){return e&&e.__esModule?e:{default:e}}n.default={name:"discountInfo",mixins:[o.default],data:function(){return{isFeeProd:!1,isFeeDealerDiscount:0,isFeeManufacturerDiscount:0,isRateDealerDiscount:0,isRateManufacturerDiscount:0,allDisabled:!0,typeSelect:{"金额":"051400000","比例":"051400001"},discountType:"051400000",feeType:"051400001"}},computed:{isFeeDiscount:function(){return!!this.baseInfo&&!!this.feeDiscountInfo&&1==this.feeDiscountInfo.isDiscount},isRateDiscount:function(){return!!this.baseInfo&&!!this.rateDiscountInfo&&1==this.rateDiscountInfo.isDiscount},feeDiscountMode:function(){return this.feeDiscountInfo&&this.feeDiscountInfo.discountMode?this.getDiscountMethod(this.feeDiscountInfo.discountMode):""},rateDiscountMode:function(){return this.rateDiscountInfo&&this.rateDiscountInfo.discountMode?this.getDiscountMethod(this.rateDiscountInfo.discountMode):""},feePlaceholder:function(){var e=this.feeDiscountMode;return"2"==e?"试算后带出":"1"==e?"":"3"==e?"请输入":""},ratePlaceholder:function(){var e=this.rateDiscountMode;return"2"==e?"试算后带出":"1"==e?"":"3"==e?"请输入":""}},mounted:function(){this.queryDictData(["whether","ChargeDeductMethodEnum"]),this.isFeeProd=1==this.baseInfo.isShowPoundage,(this.isFeeProd||1==this.baseInfo.hasFeeDiscount||1==this.baseInfo.hasRateDiscount)&&this.financePeriodYear>0?this.reloadDiscountInfo():this.allDisabled=!0},methods:{getDiscountMethod:function(e){return{"051400000":"1","051400001":"2","051400002":"3"}[e]},reloadDiscountInfo:function(e){var n=this;this.showLoading();var t=polarisserver+"/finance/query/financeDiscountInfo",a=this.baseInfo,o=this.orderData.orderinfo,r={orderNo:this.$route.params.orderNo,productCode:o.productCode,version:o.productVersion,term:a.financePeriod,masterBrandId:o.carMasterBrandId,brandId:o.carBrandId,styleId:o.carStyleId,modelId:o.carModelId,isShowPoundage:this.baseInfo.isShowPoundage};this.$http.post(t,r).then(function(t){n.hideLoading();var a=t.data;if(!a.success||!a.data)return n.errorModal(a.errorMessage||"贴息和贴手续费请求失败");var o=a.data;n.discountInfo=i.default.transToForm("discountInfo",o),n.feeDiscountInfo=n.discountInfo.feeDiscountInfo,n.rateDiscountInfo=n.discountInfo.rateDiscountInfo,n.rateDiscountInfo&&(n.discountType="051400002"!==n.rateDiscountInfo.discountMode?n.rateDiscountInfo.discountMode:n.rateDiscountInfo.customDiscountType||"051400000"),n.feeDiscountInfo&&(n.feeType="051400002"!==n.feeDiscountInfo.discountMode?n.feeDiscountInfo.discountMode:n.feeDiscountInfo.customDiscountType||"051400000"),n.feeDiscountInfo&&(n.isFeeDealerDiscount=1==n.feeDiscountInfo.isDealerDiscount,n.isFeeManufacturerDiscount=1==n.feeDiscountInfo.isManufacturerDiscount),n.rateDiscountInfo&&(n.isRateDealerDiscount=1==n.rateDiscountInfo.isDealerDiscount,n.isRateManufacturerDiscount=1==n.rateDiscountInfo.isManufacturerDiscount),n.setLoanData({name:"discountInfo",data:n.discountInfo}),n.allDisabled=!1,n.$nextTick(function(){e&&n.cacheData("discountInfo"),n.todoRecount()})}).catch(function(e){n.hideLoading(),n.errorCatchModal("贴息和贴手续费请求出错：",e),n.allDisabled=!0})},ruleNum:function(e,n){return n?[]:[(0,r.amountValidator)(e,!1)]},rulePer:function(e,n){return"3"!=n?[]:[(0,r.amountValidator)(e,!1,100,0)]},handleChange:function(e,n,t){var a=this;if(t){var i=n.split(".");this[i[0]][i[1]]=e,"feeDiscountInfo"===t?(this.$refs.feeAmount.resetField(),this.$refs.feePer.resetField()):(this.$refs.rateAmount.resetField(),this.$refs.ratePer.resetField()),this[t].manufacturerDiscountAmount=null,this[t].ratioValue=null}if(!this.checkFieldIsChange("discountInfo."+n))return!1;this.$nextTick(function(){a.cacheData("discountInfo"),a.todoRecount()})},validate:function(e){var n=this,t=[];["feeDiscountInfo","rateDiscountInfo"].forEach(function(e){n.$refs[e]&&t.push(n.$refs[e].validate())}),a.default.all(t).then(function(n){var t=_.every(n);e&&e(t)})}}}},LTZd:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("oVr6"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,function(){return a[e]})}(o);var r=t("pDAh"),s=t("C7Lr")(i.a,r.a,!1,null,null,null);n.default=s.exports},LnNL:function(e,n,t){"use strict";var a={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e.insuranceInfo?t("div",{staticClass:"cm-panel"},[t("h3",{staticClass:"margin-b-14"},[e._v("保险信息")]),e._v(" "),e.insuranceInfo?t("Form",{ref:"insuranceInfo",attrs:{model:e.insuranceInfo,rules:e.rules.loanInsuranceRule,"label-width":120}},[t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"是否融保险",prop:"isFinanceInsurance"}},[t("RadioGroup",{attrs:{v:"insuranceInfo.isFinanceInsurance"},on:{"on-change":function(n){e.handleChange(n,"insuranceInfo.isFinanceInsurance")}},model:{value:e.insuranceInfo.isFinanceInsurance,callback:function(n){e.$set(e.insuranceInfo,"isFinanceInsurance",n)},expression:"insuranceInfo.isFinanceInsurance"}},e._l(e.DICT_whetherIns,function(n,a){return t("Radio",{key:n.dictCode,attrs:{disabled:"1"==e.insuranceInfo.isRequire,label:n.dictCode}},[t("span",[e._v(e._s(n.dictName))])])}),1)],1)],1),e._v(" "),e.isBuyInsurance?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"保险出单地",prop:"insuranceChannel"}},[t("i-select",{attrs:{type:"text",v:"insuranceInfo.insuranceChannel",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"insuranceInfo.insuranceChannel")}},model:{value:e.insuranceInfo.insuranceChannel,callback:function(n){e.$set(e.insuranceInfo,"insuranceChannel",n)},expression:"insuranceInfo.insuranceChannel"}},e._l(e.dp.billingPlace,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                "+e._s(n.dictName)+"\n                            ")])}),1)],1)],1):e._e(),e._v(" "),e.isBuyInsurance?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"商业险出单方式",prop:"insuranceMode"}},[t("i-select",{attrs:{type:"text",v:"insuranceInfo.insuranceMode",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"insuranceInfo.insuranceMode")}},model:{value:e.insuranceInfo.insuranceMode,callback:function(n){e.$set(e.insuranceInfo,"insuranceMode",n)},expression:"insuranceInfo.insuranceMode"}},e._l(e.dp.insuranceMode,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                "+e._s(n.dictName)+"\n                            ")])}),1)],1)],1):e._e()],1),e._v(" "),e.isBuyInsurance?t("div",{staticClass:"ivu-table-wrapper input-edit-table table-only-horizon-line"},[t("div",{staticClass:"ivu-table"},[t("div",{staticClass:"ivu-table-body"},[t("table",{staticStyle:{width:"100%"},attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[t("tbody",{staticClass:"ivu-table-tbody"},[t("tr",[t("th",{attrs:{width:"180"}},[t("div",{staticClass:"ivu-table-cell"},[t("span",[e._v("融资项")])])]),e._v(" "),t("th",[t("div",{staticClass:"ivu-table-cell"},[t("span",[e._v("保险类型")])])]),e._v(" "),t("th",{attrs:{width:"180"}},[t("div",{staticClass:"ivu-table-cell"},[t("span",[e._v("融资额(元)")])])])]),e._v(" "),e._l(e.insuranceInfo.insuranceItemList,function(n,a){return parseInt(n.period)<=e.financePeriodYear||n.financeCode.length>0?t("tr",{key:a,staticClass:"ivu-table-row"},[t("td",{attrs:{width:"180"}},[t("div",{staticClass:"ivu-table-cell"},[t("span",[e._v(e._s(e.yearName(a))+"保险")])])]),e._v(" "),t("td",[t("div",{staticClass:"ivu-table-cell"},[t("Row",{staticClass:"insurance-drop-row",attrs:{gutter:10}},[t("i-col",{attrs:{span:"12"}},[t("Form-item",{attrs:{prop:"insuranceItemList."+a+".financeCode",rules:e.createClassRule(a)}},[t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside:click",value:e.insuranceClassClickOutFn,expression:"insuranceClassClickOutFn",arg:"click"}],staticStyle:{position:"relative"}},[t("Poptip",{attrs:{trigger:"hover",placement:"top-start"}},[t("i-select",{staticClass:"ivu-select-visible",staticStyle:{display:"none"},attrs:{multiple:""},model:{value:n.financeCode,callback:function(t){e.$set(n,"financeCode",t)},expression:"obj.financeCode"}}),e._v(" "),t("i-input",{attrs:{type:"text",readonly:"",size:"small",value:e.getInsuranceClassText(n.financeCode,a),placeholder:"请选择"},nativeOn:{click:function(n){return n.stopPropagation(),e.insuranceClassClickFn(a)}}}),e._v(" "),t("i",{staticClass:"ivu-icon ivu-icon-ios-arrow-down ivu-select-arrow",staticStyle:{position:"absolute","z-index":"9"},style:e.showClassDrop===a?{transform:"rotate(180deg)"}:{},on:{click:function(n){return n.stopPropagation(),e.insuranceClassClickFn(a)}}}),e._v(" "),t("div",{staticClass:"insurance-drop-tip",attrs:{slot:"content"},slot:"content"},[e._v("\n                                                                "+e._s(e.getInsuranceClassText(n.financeCode,a)||"未选择")+"\n                                                            ")])],1),e._v(" "),t("insurance-class-drop",{directives:[{name:"show",rawName:"v-show",value:e.showClassDrop===a,expression:"showClassDrop===i"}],attrs:{index:a,itemdata:n},on:{"on-change":e.insuranceClassDropChange,"on-close":e.insuranceClassClickOutFn},nativeOn:{click:function(e){e.stopPropagation()}}})],1)])],1),e._v(" "),e.isHasBusiIns(n,a)?t("i-col",{attrs:{span:"12"}},[t("Form-item",{attrs:{prop:"insuranceItemList."+a+".insuranceKind",rules:e.createKindRule(a)}},[t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside:click",value:e.insuranceClickOutFn,expression:"insuranceClickOutFn",arg:"click"}],staticStyle:{position:"relative"}},[t("Poptip",{attrs:{trigger:"hover",placement:"top-start"}},[t("i-select",{staticStyle:{display:"none"},attrs:{multiple:""},model:{value:n.insuranceKind,callback:function(t){e.$set(n,"insuranceKind",t)},expression:"obj.insuranceKind"}}),e._v(" "),t("i-input",{attrs:{type:"text",readonly:"",size:"small",value:e.getInsuranceKindText(n.insuranceKind),placeholder:"请选择"},nativeOn:{click:function(n){return n.stopPropagation(),e.insuranceClickFn(a)}}}),e._v(" "),t("i",{staticClass:"ivu-icon ivu-icon-ios-arrow-down ivu-select-arrow",staticStyle:{position:"absolute","z-index":"9"},style:e.showDrop===a?{transform:"rotate(180deg)"}:{},on:{click:function(n){return n.stopPropagation(),e.insuranceClickFn(a)}}}),e._v(" "),t("div",{staticClass:"insurance-drop-tip",attrs:{slot:"content"},slot:"content"},[e._v("\n                                                                "+e._s(e.getInsuranceKindText(n.insuranceKind)||"未选择")+"\n                                                            ")])],1),e._v(" "),t("insurance-drop",{directives:[{name:"show",rawName:"v-show",value:e.showDrop===a,expression:"showDrop===i"}],attrs:{index:a,itemdata:n},on:{"on-change":e.insuranceDropChange,"on-close":e.insuranceClickOutFn},nativeOn:{click:function(e){e.stopPropagation()}}})],1)])],1):e._e()],1)],1)]),e._v(" "),t("td",{attrs:{width:"180"}},[t("div",{staticClass:"ivu-table-cell"},[n.financeCode.length>0?t("Form-item",{directives:[{name:"show",rawName:"v-show",value:""!=n.insuranceType,expression:"obj.insuranceType != ''"}],attrs:{prop:"insuranceItemList."+a+".insuranceAmount",rules:e.createAmountRule(a)}},[t("InputNumber",{attrs:{size:"small",clearable:n.financeCode.length>0&&e.isHasBusiIns(n,a),disabled:n.financeCode.length>0&&!e.isHasBusiIns(n,a),v:"insuranceInfo.insuranceItemList."+a+".insuranceAmount",placeholder:"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:n.insuranceAmount,callback:function(t){e.$set(n,"insuranceAmount",t)},expression:"obj.insuranceAmount"}})],1):e._e()],1)])]):e._e()})],2)])])])]):e._e()],1):e._e()],1):e._e(),e._v(" "),e.gpsInfo?t("div",{staticClass:"cm-panel"},[t("h3",{staticClass:"margin-b-14"},[e._v("GPS信息")]),e._v(" "),t("Form",{ref:"gpsInfo",attrs:{model:e.gpsInfo,rules:e.rules.loanGpsRule,"label-width":120}},[t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"GPS厂商",prop:"gpsSupplier"}},[t("i-select",{attrs:{type:"text",v:"gpsInfo.gpsSupplier",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"gpsInfo.gpsSupplier")}},model:{value:e.gpsInfo.gpsSupplier,callback:function(n){e.$set(e.gpsInfo,"gpsSupplier",n)},expression:"gpsInfo.gpsSupplier"}},e._l(e.gpsFactoryDictList,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                "+e._s(n.dictName)+"\n                            ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[e.isInputPrice(e.gpsInfo.basePriceType)?t("Form-item",{attrs:{label:"GPS基础价金额",prop:"basePrice",rules:e.createGpsBasePriceRule()}},[t("InputNumber",{attrs:{clearable:"",v:"gpsInfo.basePrice",placeholder:e.createItemPlaceholder(e.gpsInfo.basePriceMin,e.gpsInfo.basePriceMax)},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.gpsInfo.basePrice,callback:function(n){e.$set(e.gpsInfo,"basePrice",n)},expression:"gpsInfo.basePrice"}})],1):e._e(),e._v(" "),e.isPickerPrice(e.gpsInfo.basePriceType)?t("Form-item",{attrs:{label:"GPS基础价金额",prop:"basePrice",rules:e.createGpsBasePriceRule()}},[t("i-select",{attrs:{type:"text",v:"gpsInfo.basePrice",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"gpsInfo.basePrice")}},model:{value:e.gpsInfo.basePrice,callback:function(n){e.$set(e.gpsInfo,"basePrice",n)},expression:"gpsInfo.basePrice"}},e._l((e.gpsInfo.basePriceGear||[]).map(function(n){return{name:e.formatAmount(n.value),value:n.value}}),function(n,a){return t("i-option",{key:a,attrs:{value:n.value}},[e._v("\n                                "+e._s(n.name)+"\n                            ")])}),1)],1):e._e()],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[e.isInputPrice(e.gpsInfo.increasePriceType)?t("Form-item",{attrs:{label:"GPS加价金额",prop:"increasePrice",rules:e.createGpsIncreasePriceRule()}},[t("InputNumber",{attrs:{clearable:"",v:"gpsInfo.increasePrice",placeholder:e.createItemPlaceholder(e.gpsInfo.increasePriceMin,e.gpsInfo.increasePriceMax)},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.gpsInfo.increasePrice,callback:function(n){e.$set(e.gpsInfo,"increasePrice",n)},expression:"gpsInfo.increasePrice"}})],1):e._e(),e._v(" "),e.isPickerPrice(e.gpsInfo.increasePriceType)?t("Form-item",{attrs:{label:"GPS加价金额",prop:"increasePrice",rules:e.createGpsIncreasePriceRule()}},[t("i-select",{attrs:{type:"text",v:"gpsInfo.increasePrice",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"gpsInfo.increasePrice")}},model:{value:e.gpsInfo.increasePrice,callback:function(n){e.$set(e.gpsInfo,"increasePrice",n)},expression:"gpsInfo.increasePrice"}},e._l((e.gpsInfo.increasePriceGear||[]).map(function(n){return{name:e.formatAmount(n.value),value:n.value}}),function(n,a){return t("i-option",{key:a,attrs:{value:n.value}},[e._v("\n                                "+e._s(n.name)+"\n                            ")])}),1)],1):e._e()],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"GPS加价放款类型",prop:"increaseFinanceType"}},[t("i-select",{attrs:{type:"text",v:"gpsInfo.increaseFinanceType",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"gpsInfo.increaseFinanceType")}},model:{value:e.gpsInfo.increaseFinanceType,callback:function(n){e.$set(e.gpsInfo,"increaseFinanceType",n)},expression:"gpsInfo.increaseFinanceType"}},e._l(e.DICT_gpsIncreaseFinanceType,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                "+e._s(n.dictName)+"\n                            ")])}),1)],1)],1)],1)],1)],1):e._e(),e._v(" "),e.theftInsuranceInfo?t("div",{staticClass:"cm-panel"},[t("h3",{staticClass:"margin-b-14"},[e._v("盗抢责任险信息")]),e._v(" "),t("Form",{ref:"theftInsuranceInfo",attrs:{model:e.theftInsuranceInfo,rules:e.rules.loanTheftRule||{},"label-width":120}},[t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"是否有盗抢险",prop:"isFinanceInsurance"}},[t("RadioGroup",{attrs:{v:"theftInsuranceInfo.isFinanceInsurance"},on:{"on-change":function(n){e.handleChange(n,"theftInsuranceInfo.isFinanceInsurance")}},model:{value:e.theftInsuranceInfo.isFinanceInsurance,callback:function(n){e.$set(e.theftInsuranceInfo,"isFinanceInsurance",n)},expression:"theftInsuranceInfo.isFinanceInsurance"}},e._l(e.DICT_whetherTheft,function(n,a){return t("Radio",{key:n.dictCode,attrs:{label:n.dictCode,disabled:e.isTheftItemDisabled&&"1"==n.dictCode}},[t("span",[e._v(e._s(n.dictName))])])}),1)],1)],1),e._v(" "),e.isBuyTheftInsurance&&e.isOnline?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"是否赠送",prop:"isGift"}},[t("RadioGroup",{attrs:{v:"theftInsuranceInfo.isGift"},on:{"on-change":function(n){e.handleChange(n,"theftInsuranceInfo.isGift")}},model:{value:e.theftInsuranceInfo.isGift,callback:function(n){e.$set(e.theftInsuranceInfo,"isGift",n)},expression:"theftInsuranceInfo.isGift"}},e._l(e.DICT_isGif,function(n){return t("Radio",{key:n.dictCode,attrs:{label:n.dictCode}},[t("span",[e._v(e._s(n.dictName))])])}),1)],1)],1):e._e()],1),e._v(" "),e.isGift?t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"盗抢责任险加融期限",prop:"increaseFinancePeriod"}},[t("i-select",{attrs:{type:"text",v:"theftInsuranceInfo.increaseFinancePeriod",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"theftInsuranceInfo.increaseFinancePeriod")}},model:{value:e.theftInsuranceInfo.increaseFinancePeriod,callback:function(n){e.$set(e.theftInsuranceInfo,"increaseFinancePeriod",n)},expression:"theftInsuranceInfo.increaseFinancePeriod"}},e._l(e.theftPeriodDict,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                "+e._s(n.dictName)+"\n                            ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"盗抢责任险加价类型",prop:"increasePriceType"}},[t("i-select",{attrs:{type:"text",disabled:!e.theftInsuranceInfo.increaseFinancePeriod,v:"theftInsuranceInfo.increasePriceType",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"theftInsuranceInfo.increasePriceType")}},model:{value:e.theftInsuranceInfo.increasePriceType,callback:function(n){e.$set(e.theftInsuranceInfo,"increasePriceType",n)},expression:"theftInsuranceInfo.increasePriceType"}},e._l(e.DICT_theftIncreaseType,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                "+e._s(n.dictName)+"\n                            ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"盗抢责任险基础价",prop:"basePrice"}},[t("InputNumber",{attrs:{disabled:"",v:"theftInsuranceInfo.basePrice",placeholder:"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.theftInsuranceInfo.basePrice,callback:function(n){e.$set(e.theftInsuranceInfo,"basePrice",n)},expression:"theftInsuranceInfo.basePrice"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"盗抢责任险加价",prop:"increasePrice",rules:e.createTheftIncreasePriceRule}},[t("InputNumber",{attrs:{clearable:!!e.theftInsuranceInfo.increaseFinancePeriod,disabled:!e.theftInsuranceInfo.increaseFinancePeriod,v:"theftInsuranceInfo.increasePrice",placeholder:"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.theftInsuranceInfo.increasePrice,callback:function(n){e.$set(e.theftInsuranceInfo,"increasePrice",n)},expression:"theftInsuranceInfo.increasePrice"}})],1)],1)],1):e._e()],1)],1):e._e(),e._v(" "),e.otherFinanceInfo&&e.otherFinanceInfo.length?t("div",{staticClass:"cm-panel"},[t("h3",{staticClass:"margin-b-14"},[e._v("其他融资项")]),e._v(" "),t("Form",{ref:"otherFinanceInfo",attrs:{model:e.itemInfo,"label-width":120}},[t("Row",e._l(e.itemInfo.otherFinanceInfo,function(n,a){return e.isDisabledItem(n)||e.isGpsIncreaseBasePriceCode(n.financeCode)&&e.isGpsIncreaseItemDisabled||e.isGpsIncreaseIncreasePriceCode(n.financeCode)&&e.isGpsIncreaseItemDisabled?e._e():t("i-col",{key:a,attrs:{xs:24,sm:12,md:8,lg:6}},[e.isInputPrice(n.financeType)?t("Form-item",{attrs:{label:e.toUpper(n.financeName),prop:"otherFinanceInfo."+a+".financePrice",rules:e.createRule(n)}},[t("InputNumber",{attrs:{clearable:"",v:"otherFinanceInfo."+a+".financePrice",disabled:e.gpsIncreaseIncreasePriceDisabled&&e.isGpsIncreaseIncreasePriceCode(n.financeCode),placeholder:e.createItemPlaceholder(n.financePriceMin,n.financePriceMax)},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:n.financePrice,callback:function(t){e.$set(n,"financePrice",t)},expression:"obj.financePrice"}})],1):e._e(),e._v(" "),e.isPickerPrice(n.financeType)?t("Form-item",{attrs:{label:e.toUpper(n.financeName),prop:"otherFinanceInfo."+a+".financePrice",rules:e.createRule(n)}},[t("i-select",{attrs:{v:"otherFinanceInfo."+a+".financePrice",disabled:e.gpsIncreaseIncreasePriceDisabled&&e.isGpsIncreaseIncreasePriceCode(n.financeCode),placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"otherFinanceInfo."+a+".financePrice")}},model:{value:n.financePrice,callback:function(t){e.$set(n,"financePrice",t)},expression:"obj.financePrice"}},e._l((n.financeGear||[]).map(function(n){return{name:e.formatAmount(n.value),value:n.value}}),function(n,a){return t("i-option",{key:n.value,attrs:{value:n.value}},[e._v("\n                                "+e._s(n.name)+"\n                            ")])}),1)],1):e._e(),e._v(" "),e.isRatioPrice(n.financeType)?t("Form-item",{attrs:{label:e.toUpper(n.financeName),prop:"otherFinanceInfo."+a+".financePrice"}},[t("InputNumber",{attrs:{disabled:"",placeholder:""===n.financePrice||"null"===n.financePrice?"计算后带出":""},model:{value:n.financePrice,callback:function(t){e.$set(n,"financePrice",t)},expression:"obj.financePrice"}})],1):e._e()],1)}),1)],1)],1):e._e()])},staticRenderFns:[]};n.a=a},MJFL:function(e,n,t){"use strict";var a={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"insurance-drop-panel"},[t("div",{staticClass:"insurance-drop-header",on:{click:e.handleCheckAll}},[t("Checkbox",{attrs:{indeterminate:e.indeterminate,value:e.checkAll}}),e._v(" "),t("span",{staticClass:"insurance-drop-alltext"},[e._v("全选")])],1),e._v(" "),t("CheckboxGroup",{staticStyle:{height:"128px",overflow:"auto"},on:{"on-change":e.checkAllGroupChange},model:{value:e.checkAllGroup,callback:function(n){e.checkAllGroup=n},expression:"checkAllGroup"}},e._l(e.classDict,function(n,a){return t("label",{key:a,staticClass:"ivu-select-item",staticStyle:{display:"block"}},[t("Checkbox",{attrs:{label:n.dictCode,disabled:n.disabled}},[e._v(e._s(n.dictName))])],1)}),0)],1)},staticRenderFns:[]};n.a=a},RE4Y:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("6ss7"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,function(){return a[e]})}(o);var r=t("eI4p"),s=t("C7Lr")(i.a,r.a,!1,null,null,null);n.default=s.exports},UzJl:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("3drL"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,function(){return a[e]})}(o);var r=t("LnNL"),s=t("C7Lr")(i.a,r.a,!1,null,null,null);n.default=s.exports},VfUO:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var a=I(t("3cXf")),i=I(t("hRKE")),o=I(t("4YfN")),r=t("R4Sj"),s=I(t("/qSb")),c=I(t("v8v7")),l=I(t("v7Zi")),u=t("AhRK"),f=I(t("b8UR")),d=I(t("uZu1")),h=t("9ITj"),m=t("VSB1"),p=t("ZgZx");function I(e){return e&&e.__esModule?e:{default:e}}n.default={directives:{Clickoutside:h.Clickoutside},components:{regionPicker:s.default,insuranceClassDrop:c.default,insuranceDrop:l.default},data:function(){return{rules:d.default,baseInfo:void 0,itemInfo:void 0,insuranceInfo:void 0,gpsInfo:void 0,theftInsuranceInfo:void 0,otherFinanceInfo:void 0,discountInfo:void 0,feeDiscountInfo:{isDiscount:"0"},rateDiscountInfo:{isDiscount:"0"},marginInfo:void 0,calcInfo:void 0,orderNo:this.$route.params.orderNo,gpsFactoryDictList:[],carEvaluationAgencyDictList:[]}},computed:(0,o.default)({},(0,r.mapState)("apply",["orderData","orderTabs"]),(0,r.mapState)({dp:function(e){return e.dict.dict}}),{loanNextDisabled:function(){return this.orderData.loanNextDisabled},isChedidai:function(){return this.baseInfo&&m.yx.isChedidai(this.baseInfo.businessType)},isSecondhand:function(){return this.baseInfo&&m.yx.isSecondCar(this.baseInfo.carType)},isReverseMortgage:function(){return this.baseInfo&&m.yx.isAntiLoan(this.baseInfo.isReverseMortgage)},financePeriodYear:function(){return m.yx.calcFinanceYear(this.baseInfo)},sellingAmount:function(){var e=this.orderData.loan.baseInfo,n=this.isSecondhand?e.carEstimatedPrice:e.actualSellingPrice;return(0,m.stringToNumber)(n)},nextDisabled:function(){return this.financePeriodYear<=0||""===this.sellingAmount},isBuyInsurance:function(){return this.insuranceInfo&&"1"==this.insuranceInfo.isFinanceInsurance},isBuyTheftInsurance:function(){return this.theftInsuranceInfo&&"1"==this.theftInsuranceInfo.isFinanceInsurance},theftPeriodDict:function(){for(var e=[],n=1,t=this.financePeriodYear;n<=t;n++)e.push({dictName:n+"年",dictCode:""+n});return e}}),methods:(0,o.default)({},(0,r.mapMutations)("app",["showLoading","hideLoading"]),(0,r.mapMutations)("apply",["setLoanNextDisabled","setOrderLoanTabSaved","setChangeRegion","setLoanData","setOrderModuleNumber","setOrderModuleError"]),(0,r.mapActions)("dict",["queryDictData"]),{errorModal:function(e,n,t){var a="";e.split(";").forEach(function(e){e&&(a+=a?"；<br>"+e:e)});var i={title:"提示",okText:t||"确 定",content:a};n&&(i.onOk=n),this.$Modal.error(i)},updateLoanNextDisabled:function(){if(!this.baseInfo)return!0;var e=(0,u.getBaseField)(f.default.transToSave("baseInfo",this.orderData.loan));this.setLoanNextDisabled(e.total!=e.count)},todoRecount:function(){var n=this;this.updateLoanFieldsNumber(),this.$nextTick(function(){var t=e(".apply-loan-module .ivu-form-item-error").length;n.hasError=t>0,n.setOrderModuleError({index:1,hasError:n.hasError})})},createRule:function(e){var n=[],t=m.yx.isItemRequire(e.isRequire);if(m.yx.isPickerPrice(e.financeType))return n.push({validator:function(n,t,a){m.yx.amountReg.test(t)?a():a(new Error(e.financeName+"不能为空"))},trigger:"change"}),n;if(m.yx.isInputPrice(e.financeType)){var a=m.yx.isEmpty(e.financePriceMin)?0:parseFloat(e.financePriceMin),i=m.yx.isEmpty(e.financePriceMax)?"":parseFloat(e.financePriceMax);return n.push((0,p.amountValidator)(e.financeName,t,i,a)),n}return t&&m.yx.isRatioPrice(e.financeType)?(n.push({required:!0,message:e.financeName+"不能为空",trigger:"change"}),n):void 0},updateLoanFieldsNumber:function(){this.orderData.loan.orderNo=this.orderNo;var e=(0,u.getLoanFieldNum)(this.orderData.loan);this.setOrderModuleNumber({index:1,data:e})},getHandleFieldValue:function(e,n){if("object"==(void 0===e?"undefined":(0,i.default)(e))&&n){var t=n.split("."),a=e;for(var o in t)if("object"==(void 0===a?"undefined":(0,i.default)(a))){var r=t[o];_.isArray(a)&&(r=(0,m.stringToNumber)(r)),a=a[r]}return a}},checkFieldIsChange:function(e){var n=this.orderData.loan,t=JSON.parse(sessionStorage.getItem("loan")||"{}"),o=this.getHandleFieldValue(n,e),r=this.getHandleFieldValue(t,e);return(o="object"==(void 0===o?"undefined":(0,i.default)(o))&&o instanceof Date?new Date(o).format("yyyy-MM-dd"):"object"==(void 0===o?"undefined":(0,i.default)(o))?(0,a.default)(o):""+o)!==(r="object"==(void 0===r?"undefined":(0,i.default)(r))&&r instanceof Date?new Date(r).format("yyyy-MM-dd"):"object"==(void 0===r?"undefined":(0,i.default)(r))?(0,a.default)(r):""+r)},cacheData:function(e,n){var t=this;this.setOrderLoanTabSaved(!1);var i=JSON.parse((0,a.default)(this.orderData.loan||{}));if(i[e]=f.default.transToSave(e,this.orderData.loan),sessionStorage.setItem("loan",(0,a.default)(i)),this.orderData.hasSaved.loan||this.orderData.hasSaved[e])return!1;var o={baseInfo:":finance:baseInfo",itemInfo:":finance:financeItem",discountInfo:":finance:discount",marginInfo:":finance:margin",calcInfo:":finance:calculation"},r=this.orderNo+o[e];this.orderData.loan.orderNo=this.orderNo;var s=f.default.transToSave(e,this.orderData.loan);s&&(s.orderNo=this.orderNo,"calcInfo"==e&&(s.actualSellingPrice=this.sellingAmount));var c={key:r,value:s?(0,a.default)(s):""};if("baseInfo"==e){var l=[c];if("baseInfo.financePeriod"==n){var u=f.default.transToSave("itemInfo",this.orderData.loan);l.push({key:this.orderNo+o.itemInfo,value:u?(0,a.default)(u):""})}if("baseInfo.actualSellingPrice"==n||"baseInfo.carEstimatedPrice"==n){var d=f.default.transToSave("marginInfo",this.orderData.loan);l.push({key:this.orderNo+o.marginInfo,value:d?(0,a.default)(d):""});var h=f.default.transToSave("calcInfo",this.orderData.loan);l.push({key:this.orderNo+o.calcInfo,value:h?(0,a.default)(h):""})}this.$http.post(polarisserver+"/cache/insertMultiCache",l).then(function(e){}).catch(function(e){t.errorCatchModal("缓存请求出错",e)})}else"itemInfo"!=e&&"marginInfo"!=e&&"discountInfo"!=e&&"calcInfo"!=e||this.$http.post(polarisserver+"/cache/insertCache",c).then(function(e){}).catch(function(e){t.errorCatchModal("缓存请求出错",e)})},getSaveData:function(){this.orderData.loan.orderNo=this.orderNo;var e=f.default.transToSave("baseInfo",this.orderData.loan),n=f.default.transToSave("itemInfo",this.orderData.loan),t=f.default.transToSave("discountInfo",this.orderData.loan),a=f.default.transToSave("marginInfo",this.orderData.loan),i=f.default.transToSave("calcInfo",this.orderData.loan);i.actualSellingPrice=this.sellingAmount;var o=this.orderData.hasSaved.loan;return{orderNo:this.orderNo,hasSaved:o,financeBaseInfo:e,financeItemInfo:n,financeDiscountInfo:t,financeMarginInfo:a,financeCalculationInfo:i}},queryGpsFactoryDictList:function(){var e=this,n=this.orderData.orderinfo.dealerCode,t=baseserver+"/dictionary/queryList/GP:"+n;this.showLoading(),this.$http.get(t).then(function(n){e.hideLoading();var t=n.data;return t.success?(e.gpsFactoryDictList=t.data||[],e.gpsFactoryDictList.length?void 0:e.errorModal("查询GPS厂商无数据")):e.errorModal(t.errorMessage||"查询GPS厂商失败")}).catch(function(n){e.hideLoading(),e.errorCatchModal("查询GPS厂商出错",n)})},queryEvalAgencyDictList:function(){var e=this,n=this.orderData.orderinfo.dealerCode,t=baseserver+"/dictionary/queryList/CE:"+n;this.$http.get(t).then(function(n){var t=n.data;return t.success?(e.carEvaluationAgencyDictList=t.data||[],e.carEvaluationAgencyDictList.length?void 0:e.errorModal("查询二手车评估机构无数据")):e.errorModal("查询二手车评估机构失败")}).catch(function(n){e.errorCatchModal("查询二手车评估机构出错:",n)})},queryInitData:function(e,n){var t=this,a="/"+this.$route.params.orderNo,i=polarisserver+{baseInfo:"/finance/query/baseInfo",itemInfo:"/finance/query/financeItemInfo",marginInfo:"/finance/query/financeMarginInfo",calcInfo:"/finance/query/financeCalculationInfo"}[e]+""+a;this.showLoading(),this.$http.get(i).then(function(a){if(t.hideLoading(),!a.data.success)return t.errorModal(a.data.errorMessage||e+"信息请求失败");var i;switch(e){case"baseInfo":i=a.data.data,t.baseInfo=f.default.transToForm(e,i);break;case"itemInfo":(i=a.data.data)&&(t.itemInfo=f.default.transToForm(e,i),t.insuranceInfo=t.itemInfo.insuranceInfo,t.gpsInfo=t.itemInfo.gpsInfo,t.gpsInfo&&t.queryGpsFactoryDictList(),t.theftInsuranceInfo=t.itemInfo.theftInsuranceInfo,t.otherFinanceInfo=t.itemInfo.otherFinanceInfo);case"marginInfo":i=a.data.data,t.marginInfo=f.default.transToForm(e,i);break;case"calcInfo":i=a.data.data,t.calcInfo=f.default.transToForm(e,i)}t.setLoanData({name:e,data:t[e]}),n&&n(t[e])}).catch(function(n){t.hideLoading(),t.errorCatchModal("贷款"+e+"信息请求出错：",n)})}}),mounted:function(){this.baseInfo=this.orderData.baseInfo}}}).call(n,t("L7Pj"))},ao0m:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,i=t("4YfN"),o=(a=i)&&a.__esModule?a:{default:a},r=t("R4Sj");n.default={name:"insuranceDrop",props:{index:{default:0},itemdata:{}},components:{},data:function(){return{indeterminate:!0,checkAll:!1,checkAllGroup:[],insTypesDict:[]}},computed:(0,o.default)({},(0,r.mapState)("apply",["orderData"]),{obj:function(){return this.itemdata},checkAllGroupText:function(){var e=this,n=[];return this.checkAllGroup.forEach(function(t){var a=e.insTypesDict.find(function(e){return e.dictCode==t});a&&n.push(a.dictName)}),n.join("，")}}),mounted:function(){var e=this;this.queryDictData(["insuranceTypes"]).then(function(n){e.insTypesDict=n.insuranceTypes}),this.checkAllGroup=this.itemdata.insuranceKind,this.checkAllGroupChange(this.checkAllGroup,!0)},methods:(0,o.default)({},(0,r.mapActions)("dict",["queryDictData"]),{checkAllGroupChange:function(e,n){e.length>0&&e.length===this.insTypesDict.length?(this.indeterminate=!1,this.checkAll=!0):e.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1),n||this.change()},handleCheckAll:function(e){this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?this.checkAllGroup=this.insTypesDict.map(function(e){return e.dictCode}):this.checkAllGroup=[],this.change()},close:function(){this.$emit("on-close")},change:function(){var e=this;this.$nextTick(function(){e.$emit("on-change",{i:e.index,insuranceKind:e.checkAllGroup,insuranceKindText:e.checkAllGroupText})})}})}},cQPK:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=s(t("rVsN")),i=s(t("VfUO")),o=s(t("uZu1")),r=t("VSB1");function s(e){return e&&e.__esModule?e:{default:e}}n.default={mixins:[i.default],name:"orderLoanBasicForm",props:{},components:{},data:function(){return{validateRule:o.default.loanBasicRule,currentDateOptions:{disabledDate:function(e){return e&&e.valueOf()>new Date((new Date).format("yyyy-MM-dd")).getTime()}},nodeFieldDisabledFlag:!1}},computed:{DICTLIST_car_number_prefix:function(){var e=this;return this.dp.car_number_prefix.filter(function(n){return n.parentCode==e.baseInfo.provinceCode})},DICTLIST_carEvaluationAgencyDictList:function(){return this.isChedidai?this.carEvaluationAgencyDictList.filter(function(e){return"0"!==e.dictCode}):this.carEvaluationAgencyDictList}},mounted:function(){var e=this;(this.queryDictData(["whether","purchasePurpose","usageNature","province_shot_name","car_number_prefix"]),this.nodeFieldDisabledFlag="0"===this.orderData.orderinfo.editCarFlag,this.baseInfo&&this.baseInfo.carTypeConfig)&&(this.baseInfo.carTypeConfig.find(function(e){return"049500001"===e.value})&&this.queryEvalAgencyDictList());this.$nextTick(function(){e.updateLoanNextDisabled(),e.todoRecount()})},methods:{createSellPriceRule:function(e){var n=this;return[{validator:function(t,a,i){if(r.yx.isEmpty(a))i(new Error(e+"不能为空"));else if(/^((\d+\d*)|(\d+\d*\.\d{1,2}))$/.test(a)){var o=(0,r.floatMul)((0,r.stringToNumber)(n.baseInfo.carGuidancePrice||0),1.05);0==(0,r.stringToNumber)(a)?i(new Error(e+"必须大于0！")):(0,r.stringToNumber)(a)>o?i(new Error(e+"只能填写0-"+o)):i()}else i(new Error(e+"填写错误"))},trigger:"change"}]},createEstimatedPriceRule:function(e){var n=this;return[{validator:function(t,a,i){if(r.yx.isEmpty(a))i(new Error(e+"不能为空"));else if(/^((\d+\d*)|(\d+\d*\.\d{1,2}))$/.test(a)){var o=(0,r.stringToNumber)(n.baseInfo.carGuidancePrice||0);0==(0,r.stringToNumber)(a)?i(new Error(e+"必须大于0！")):(0,r.stringToNumber)(a)>o?i(new Error(e+"只能填写0-"+o)):i()}else i(new Error(e+"填写错误"))},trigger:"change"}]},createProductionDateRule:function(){var e=this;return[{validator:function(n,t,a){var i=e.baseInfo.productionDate,o=e.baseInfo.initialDate;r.yx.isEmpty(i)?a(new Error("出厂日期不得为空")):i&&o&&new Date(i).getTime()>new Date(o).getTime()?a(new Error("出厂日期不得大于初登日期")):a()},trigger:"change"}]},createInitialDateRule:function(){var e=this;return[{validator:function(n,t,a){var i=e.baseInfo.productionDate,o=e.baseInfo.initialDate;r.yx.isEmpty(o)?a(new Error("初登日期不得为空")):i&&o&&new Date(i).getTime()>new Date(o).getTime()?a(new Error("出厂日期不得大于初登日期")):a()},trigger:"change"}]},handleBlur:function(e){var n=this,t=e.target.parentNode.getAttribute("v")||e.target.parentNode.parentNode.getAttribute("v");if(!this.checkFieldIsChange(t))return!1;var a=t.split(".")[1];this.$refs.baseInfo.fields.find(function(e){return e.prop==a});"baseInfo.actualSellingPrice"!=t&&"baseInfo.carEstimatedPrice"!=t||this.$emit("on-sellpricechange"),this.$nextTick(function(){n.updateLoanNextDisabled(),n.cacheData("baseInfo",t),n.todoRecount()})},handleChange:function(e,n,t){var a=this;if(!this.checkFieldIsChange(n)&&!t)return!1;var i=n.split(".")[1];this.$refs.baseInfo.fields.find(function(e){return e.prop==i});"baseInfo.financePeriod"==n&&this.$emit("on-financeperiodchange"),this.$nextTick(function(){"baseInfo.productionDate"==n&&a.baseInfo.initialDate&&a.$refs.baseInfo.validateField("initialDate"),"baseInfo.initialDate"==n&&a.baseInfo.productionDate&&a.$refs.baseInfo.validateField("productionDate"),a.updateLoanNextDisabled(),a.cacheData("baseInfo",n),a.todoRecount()})},changeRegion:function(e,n){this.setChangeRegion({module:"baseInfo",field:e}),this.handleChange(e,n,!0)},validate:function(e){var n=this,t=[];["baseInfo","regionRef1"].forEach(function(e){t.push(new a.default(function(t){n.$refs[e]?n.$refs[e].validate(function(e){t(e)}):t(!0)}))}),a.default.all(t).then(function(n){var t=_.every(n);e&&e(t)})}},watch:{}}},dMMi:function(e,n,t){"use strict";var a={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e.baseInfo?t("div",[t("h3",{staticClass:"margin-b-14"},[e._v("贷款基本信息")]),e._v(" "),e.baseInfo?t("Form",{ref:"baseInfo",attrs:{model:e.baseInfo,rules:e.validateRule,"label-width":120}},[t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"业务类型",prop:"businessType"}},[t("i-select",{attrs:{type:"text",disabled:1==e.baseInfo.businessTypeConfig.length,v:"baseInfo.orderApplicationType",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.orderApplicationType")}},model:{value:e.baseInfo.businessType,callback:function(n){e.$set(e.baseInfo,"businessType",n)},expression:"baseInfo.businessType"}},e._l(e.baseInfo.businessTypeConfig,function(n,a){return t("i-option",{key:n.value,attrs:{value:n.value}},[e._v("\n                                    "+e._s(n.name)+"\n                                ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"租赁属性",prop:"leaseType"}},[t("i-select",{attrs:{type:"text",disabled:1==e.baseInfo.leaseTypeConfig.length,v:"baseInfo.leaseType",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.leaseType")}},model:{value:e.baseInfo.leaseType,callback:function(n){e.$set(e.baseInfo,"leaseType",n)},expression:"baseInfo.leaseType"}},e._l(e.baseInfo.leaseTypeConfig,function(n,a){return t("i-option",{key:n.value,attrs:{value:n.value}},[e._v("\n                                    "+e._s(n.name)+"\n                                ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"还款方式",prop:"repaymentMode"}},[t("i-select",{attrs:{type:"text",disabled:1==e.baseInfo.repaymentModeConfig.length,v:"baseInfo.repaymentMode",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.repaymentMode")}},model:{value:e.baseInfo.repaymentMode,callback:function(n){e.$set(e.baseInfo,"repaymentMode",n)},expression:"baseInfo.repaymentMode"}},e._l(e.baseInfo.repaymentModeConfig,function(n,a){return t("i-option",{key:n.value,attrs:{value:n.value}},[e._v("\n                                    "+e._s(n.name)+"\n                                ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"还款频率",prop:"repaymentFrequency"}},[t("i-select",{attrs:{type:"text",disabled:1==e.baseInfo.repaymentFrequencyConfig.length,v:"baseInfo.repaymentFrequency",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.repaymentFrequency")}},model:{value:e.baseInfo.repaymentFrequency,callback:function(n){e.$set(e.baseInfo,"repaymentFrequency",n)},expression:"baseInfo.repaymentFrequency"}},e._l(e.baseInfo.repaymentFrequencyConfig,function(n,a){return t("i-option",{key:n.value,attrs:{value:n.value}},[e._v("\n                                    "+e._s(n.name)+"\n                                ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"融资期限",prop:"financePeriod"}},[t("i-select",{attrs:{type:"text",disabled:1==e.baseInfo.financePeriodConfig.length,v:"baseInfo.financePeriod",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.financePeriod")}},model:{value:e.baseInfo.financePeriod,callback:function(n){e.$set(e.baseInfo,"financePeriod",n)},expression:"baseInfo.financePeriod"}},e._l(e.baseInfo.financePeriodConfig,function(n,a){return t("i-option",{key:n.value,attrs:{value:n.value}},[e._v("\n                                    "+e._s(n.name)+"\n                                ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"是否资源车",prop:"isResourceCar"}},[t("i-select",{attrs:{type:"text",disabled:1==e.baseInfo.isResourceCarConfig.length,v:"baseInfo.isResourceCar",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.isResourceCar")}},model:{value:e.baseInfo.isResourceCar,callback:function(n){e.$set(e.baseInfo,"isResourceCar",n)},expression:"baseInfo.isResourceCar"}},e._l(e.dp.whether,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                    "+e._s(n.dictName)+"\n                                ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"车辆类型",prop:"carType"}},[t("i-select",{attrs:{type:"text",disabled:1==e.baseInfo.carTypeConfig.length,v:"baseInfo.carType",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.carType")}},model:{value:e.baseInfo.carType,callback:function(n){e.$set(e.baseInfo,"carType",n)},expression:"baseInfo.carType"}},e._l(e.baseInfo.carTypeConfig,function(n,a){return t("i-option",{key:n.value,attrs:{value:n.value}},[e._v("\n                                    "+e._s(n.name)+"\n                                ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"新车指导价(元)",prop:"carGuidancePrice"}},[t("InputNumber",{attrs:{disabled:"",placeholder:"请输入"},model:{value:e.baseInfo.carGuidancePrice,callback:function(n){e.$set(e.baseInfo,"carGuidancePrice",n)},expression:"baseInfo.carGuidancePrice"}})],1)],1),e._v(" "),e.isSecondhand?e._e():t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"车辆销售价(元)",prop:"actualSellingPrice",rules:e.createSellPriceRule("车辆销售价")}},[t("InputNumber",{attrs:{clearable:"",v:"baseInfo.actualSellingPrice",placeholder:"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.baseInfo.actualSellingPrice,callback:function(n){e.$set(e.baseInfo,"actualSellingPrice",n)},expression:"baseInfo.actualSellingPrice"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"购车目的",prop:"purchasePurpose"}},[t("i-select",{attrs:{type:"text",v:"baseInfo.purchasePurpose",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.purchasePurpose")}},model:{value:e.baseInfo.purchasePurpose,callback:function(n){e.$set(e.baseInfo,"purchasePurpose",n)},expression:"baseInfo.purchasePurpose"}},e._l(e.dp.purchasePurpose,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                    "+e._s(n.dictName)+"\n                                ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"车辆使用性质",prop:"carCommercialType"}},[t("i-select",{attrs:{type:"text",v:"baseInfo.purchasePurpose",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.carCommercialType")}},model:{value:e.baseInfo.carCommercialType,callback:function(n){e.$set(e.baseInfo,"carCommercialType",n)},expression:"baseInfo.carCommercialType"}},e._l(e.dp.usageNature,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                    "+e._s(n.dictName)+"\n                                ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{staticClass:"hascol-form-item",attrs:{label:"预计上牌城市"}},[t("region-picker",{ref:"regionRef1",attrs:{type:"2",regionlabel:"预计上牌"},on:{"on-change":function(n){return e.changeRegion("predictLicense","baseInfo.predictLicense_Region")}},model:{value:e.baseInfo.predictLicense_Region,callback:function(n){e.$set(e.baseInfo,"predictLicense_Region",n)},expression:"baseInfo.predictLicense_Region"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"客户一级渠道",prop:"custPrimaryChannel"}},[t("i-select",{attrs:{type:"text",v:"gpsInfo.custPrimaryChannel",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.custPrimaryChannel")}},model:{value:e.baseInfo.custPrimaryChannel,callback:function(n){e.$set(e.baseInfo,"custPrimaryChannel",n)},expression:"baseInfo.custPrimaryChannel"}},e._l(e.baseInfo.custPrimaryChannelConfig,function(n,a){return t("i-option",{key:n.value,attrs:{value:n.value}},[e._v("\n                                    "+e._s(n.name)+"\n                                ")])}),1)],1)],1),e._v(" "),e.isSecondhand?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"公里数(万公里)",prop:"mileage"}},[t("InputNumber",{attrs:{clearable:"",v:"baseInfo.mileage",placeholder:"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.baseInfo.mileage,callback:function(n){e.$set(e.baseInfo,"mileage",n)},expression:"baseInfo.mileage"}})],1)],1):e._e(),e._v(" "),e.isSecondhand?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"车辆预估价(元)",prop:"carEstimatedPrice",rules:e.createEstimatedPriceRule("车辆预估价")}},[t("InputNumber",{attrs:{clearable:"",v:"baseInfo.carEstimatedPrice",placeholder:"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.baseInfo.carEstimatedPrice,callback:function(n){e.$set(e.baseInfo,"carEstimatedPrice",n)},expression:"baseInfo.carEstimatedPrice"}})],1)],1):e._e(),e._v(" "),e.isSecondhand?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"车架号(VIN码)",prop:"vinNum"}},[t("Input",{attrs:{clearable:!e.nodeFieldDisabledFlag,disabled:e.nodeFieldDisabledFlag,v:"baseInfo.vinNum",placeholder:"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.baseInfo.vinNum,callback:function(n){e.$set(e.baseInfo,"vinNum",n)},expression:"baseInfo.vinNum"}})],1)],1):e._e(),e._v(" "),e.isSecondhand?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"出厂日期",prop:"productionDate",rules:e.createProductionDateRule()}},[t("DatePicker",{attrs:{type:"date",editable:!1,disabled:e.nodeFieldDisabledFlag,options:e.currentDateOptions,v:"baseInfo.productionDate",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.productionDate")}},model:{value:e.baseInfo.productionDate,callback:function(n){e.$set(e.baseInfo,"productionDate",n)},expression:"baseInfo.productionDate"}})],1)],1):e._e(),e._v(" "),e.isSecondhand?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"初登日期",prop:"initialDate",rules:e.createInitialDateRule()}},[t("DatePicker",{attrs:{type:"date",editable:!1,options:e.currentDateOptions,v:"baseInfo.initialDate",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.initialDate")}},model:{value:e.baseInfo.initialDate,callback:function(n){e.$set(e.baseInfo,"initialDate",n)},expression:"baseInfo.initialDate"}})],1)],1):e._e(),e._v(" "),e.isSecondhand?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{staticClass:"hascol-form-item",attrs:{label:"当前牌照",prop:"licenseNum"}},[t("Row",{staticClass:"font0",attrs:{gutter:0}},[t("i-col",{attrs:{xs:8}},[t("Form-item",{attrs:{prop:"provinceCode"}},[t("i-select",{attrs:{type:"text",v:"baseInfo.provinceCode",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.provinceCode")}},model:{value:e.baseInfo.provinceCode,callback:function(n){e.$set(e.baseInfo,"provinceCode",n)},expression:"baseInfo.provinceCode"}},e._l(e.dp.province_shot_name,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                                "+e._s(n.dictName)+"\n                                            ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:8}},[t("Form-item",{attrs:{prop:"cityCode"}},[t("i-select",{attrs:{type:"text",v:"baseInfo.cityCode",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.cityCode")}},model:{value:e.baseInfo.cityCode,callback:function(n){e.$set(e.baseInfo,"cityCode",n)},expression:"baseInfo.cityCode"}},e._l(e.DICTLIST_car_number_prefix,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                                "+e._s(n.dictName)+"\n                                            ")])}),1)],1)],1),e._v(" "),t("i-col",{attrs:{xs:8}},[t("Form-item",{attrs:{prop:"licenseSequence"}},[t("Input",{attrs:{clearable:"",v:"baseInfo.licenseSequence",placeholder:"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.baseInfo.licenseSequence,callback:function(n){e.$set(e.baseInfo,"licenseSequence",n)},expression:"baseInfo.licenseSequence"}})],1)],1)],1)],1)],1):e._e(),e._v(" "),e.isSecondhand?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"二手车评估机构",prop:"carEvaluationAgency"}},[t("i-select",{attrs:{type:"text",v:"baseInfo.carEvaluationAgency",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.carEvaluationAgency")}},model:{value:e.baseInfo.carEvaluationAgency,callback:function(n){e.$set(e.baseInfo,"carEvaluationAgency",n)},expression:"baseInfo.carEvaluationAgency"}},e._l(e.DICTLIST_carEvaluationAgencyDictList,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                    "+e._s(n.dictName)+"\n                                ")])}),1)],1)],1):e._e(),e._v(" "),e.isChedidai?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"车辆过户次数",prop:"transferTimes"}},[t("InputNumber",{attrs:{clearable:"",defaultFormatter:!1,v:"baseInfo.transferTimes",placeholder:"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.baseInfo.transferTimes,callback:function(n){e.$set(e.baseInfo,"transferTimes",n)},expression:"baseInfo.transferTimes"}})],1)],1):e._e(),e._v(" "),e.isChedidai?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"交强险失效日",prop:"compulsoryInsuranceExpiryDate"}},[t("DatePicker",{attrs:{type:"date",editable:!1,v:"baseInfo.compulsoryInsuranceExpiryDate",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.compulsoryInsuranceExpiryDate")}},model:{value:e.baseInfo.compulsoryInsuranceExpiryDate,callback:function(n){e.$set(e.baseInfo,"compulsoryInsuranceExpiryDate",n)},expression:"baseInfo.compulsoryInsuranceExpiryDate"}})],1)],1):e._e(),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("Form-item",{attrs:{label:"是否反贷",prop:"isReverseMortgage"}},[t("i-select",{attrs:{type:"text",v:"baseInfo.isReverseMortgage",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.isReverseMortgage")}},model:{value:e.baseInfo.isReverseMortgage,callback:function(n){e.$set(e.baseInfo,"isReverseMortgage",n)},expression:"baseInfo.isReverseMortgage"}},e._l(e.dp.whether,function(n,a){return t("i-option",{key:n.dictCode,attrs:{value:n.dictCode}},[e._v("\n                                    "+e._s(n.dictName)+"\n                                ")])}),1)],1)],1),e._v(" "),e.isReverseMortgage&&!e.isSecondhand?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"车辆开票日期",prop:"carInvoiceDate"}},[t("DatePicker",{attrs:{type:"date",editable:!1,options:e.currentDateOptions,v:"baseInfo.carInvoiceDate",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.carInvoiceDate")}},model:{value:e.baseInfo.carInvoiceDate,callback:function(n){e.$set(e.baseInfo,"carInvoiceDate",n)},expression:"baseInfo.carInvoiceDate"}})],1)],1):e._e(),e._v(" "),e.isReverseMortgage&&e.isSecondhand?t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"车辆过户完成日期",prop:"carTransferDate"}},[t("DatePicker",{attrs:{type:"date",editable:!1,options:e.currentDateOptions,v:"baseInfo.carTransferDate",placeholder:"请选择"},on:{"on-change":function(n){e.handleChange(n,"baseInfo.carTransferDate")}},model:{value:e.baseInfo.carTransferDate,callback:function(n){e.$set(e.baseInfo,"carTransferDate",n)},expression:"baseInfo.carTransferDate"}})],1)],1):e._e()],1)],1):e._e()],1):e._e()])},staticRenderFns:[]};n.a=a},eI4p:function(e,n,t){"use strict";var a={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e.calcInfo?t("div",{staticClass:"cm-panel"},[t("h3",{staticClass:"margin-b-14"},[e._v("贷款计算")]),e._v(" "),t("Form",{ref:"calcInfo",attrs:{model:e.calcInfo,rules:e.rules.loanCalcRule,"label-width":120,"show-message":!0}},[t("Row",[t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"车辆销售价(元)"}},[t("InputNumber",{attrs:{disabled:"",number:"",value:e.sellingAmount,placeholder:"请输入"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"首付金额(元)",prop:"downPaymentAmount",rules:e.newRule.downPaymentAmount}},[t("InputNumber",{attrs:{clearable:"",disabled:e.downAmountDisabled,v:"calcInfo.downPaymentAmount",placeholder:e.downAmountDisabled?"计算后带出":"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.calcInfo.downPaymentAmount,callback:function(n){e.$set(e.calcInfo,"downPaymentAmount",n)},expression:"calcInfo.downPaymentAmount"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"首付比例(%)",prop:"downPaymentProportion",rules:e.newRule.downPaymentProportion}},[t("InputNumber",{attrs:{clearable:"",disabled:e.downPctDisabled,v:"calcInfo.downPaymentProportion",placeholder:e.downPctDisabled?"计算后带出":"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.calcInfo.downPaymentProportion,callback:function(n){e.$set(e.calcInfo,"downPaymentProportion",n)},expression:"calcInfo.downPaymentProportion"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"尾付金额(元)",prop:"finalPaymentAmount",rules:e.newRule.finalPaymentAmount}},[t("InputNumber",{attrs:{clearable:!e.finalAmountDisabled,disabled:e.finalAmountDisabled,v:"calcInfo.finalPaymentAmount",placeholder:e.finalAmountDisabled?"计算后带出":"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.calcInfo.finalPaymentAmount,callback:function(n){e.$set(e.calcInfo,"finalPaymentAmount",n)},expression:"calcInfo.finalPaymentAmount"}})],1)],1),e._v(" "),t("i-col",{attrs:{xs:24,sm:12,md:8,lg:6}},[t("FormItem",{attrs:{label:"尾付比例(%)",prop:"finalPaymentProportion",rules:e.newRule.finalPaymentProportion}},[t("InputNumber",{attrs:{clearable:!e.finalPctDisabled,disabled:e.finalPctDisabled,v:"calcInfo.finalPaymentProportion",placeholder:e.finalPctDisabled?"计算后带出":"请输入"},on:{"on-blur":e.handleBlur,"on-clear":e.handleBlur},model:{value:e.calcInfo.finalPaymentProportion,callback:function(n){e.$set(e.calcInfo,"finalPaymentProportion",n)},expression:"calcInfo.finalPaymentProportion"}})],1)],1)],1)],1)],1):e._e()])},staticRenderFns:[]};n.a=a},mMLf:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("cQPK"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,function(){return a[e]})}(o);var r=t("dMMi"),s=t("C7Lr")(i.a,r.a,!1,null,null,null);n.default=s.exports},oVr6:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0});var a=p(t("rVsN")),i=p(t("4YfN")),o=t("R4Sj"),r=p(t("mMLf")),s=p(t("UzJl")),c=p(t("86i2")),l=p(t("7dof")),u=p(t("RE4Y")),f=p(t("VfUO")),d=t("ZgZx"),h=t("VSB1"),m=p(t("iClD"));function p(e){return e&&e.__esModule?e:{default:e}}n.default={name:"orderLoanModule",mixins:[f.default],components:{orderLoanBaseForm:r.default,orderLoanItemForm:s.default,orderLoanDiscountForm:c.default,orderLoanMarginForm:l.default,orderLoanCalcForm:u.default},directives:{},props:{},data:function(){return{contactorModel:{},ruleValidate:d.validateRules.loanInfoPage,hasBaseInfo:!1,hasItemInfo:!1,hasDiscountInfo:!1,hasMarginInfo:!1,hasCalcInfo:!1,showCalcRes:!1,calcres:{title:"贷款试算结果",showModal:!1,exportLoading:!1,loading:!1,total:0,data:[],columns:[{title:"金融机构",key:"capitalName",render:function(e,n){return e("div",n.row.capitalName||"--")}},{title:"客户融资额(元)",key:"custFinanceAmount",render:function(e,n){return e("div",m.default.number(n.row.custFinanceAmount)||"--")}},{title:"风控融资额(元)",key:"riskControlFinanceAmount",render:function(e,n){return e("div",m.default.number(n.row.riskControlFinanceAmount)||"--")}},{title:"风险融资额(元)",key:"riskFinanceAmount",render:function(e,n){return e("div",m.default.number(n.row.riskFinanceAmount)||"--")}},{title:"客户利率(%)",key:"custInterestRate",render:function(e,n){return e("div",m.default.number(n.row.custInterestRate)||"--")}},{title:"客户费率(%)",key:"custCostRate",render:function(e,n){var t=n.row.custCostRate;return e("span",{style:{color:t<0?"#F5222D ":""}},m.default.number(t)||"--")}},{title:"月供金额(元)",key:"custMonthlyAmount",render:function(e,n){return e("div",m.default.number(n.row.custMonthlyAmount)||"--")}},{title:"放款金额(元)",key:"loanPayableAmount",render:function(e,n){return"YX"==n.row.capitalCode?e("div",m.default.number(n.row.loanPayableAmount)||"--"):e("div","--")}}]}}},computed:(0,i.default)({},(0,o.mapState)("apply",["orderData"])),mounted:function(){var e=this;this.queryDictData(["province"]).then(function(n){n.province&&n.province.length||e.errorModal("请求省份数据为空")}),this.queryInitData("baseInfo",function(n){e.hasBaseInfo=!!n,e.hasItemInfo="1"==n.hasInsurance||"1"==n.hasGps||"1"==n.hasTheftInsurance||"1"==n.hasOtherFinance,e.hasMarginInfo="1"==n.hasMargin;var t="011100001"==n.chargingMode||"011100002"==n.chargingMode;e.hasDiscountInfo=t||"1"==n.hasFeeDiscount||"1"==n.hasRateDiscount})},destroyed:function(){sessionStorage.removeItem("loan")},methods:(0,i.default)({},(0,o.mapMutations)("apply",["setLoanData"]),(0,o.mapMutations)("app",["showLoading","hideLoading"]),{financePeriodChangeFn:function(){this.orderData.loan.itemInfo&&this.orderData.loan.itemInfo.theftInsuranceInfo&&this.$refs.itemInfoRef&&this.$refs.itemInfoRef.updateTheftBasePrice(),1!=this.baseInfo.isShowPoundage&&1!=this.baseInfo.hasFeeDiscount&&1!=this.baseInfo.hasRateDiscount||!this.$refs.discountInfoRef||this.$refs.discountInfoRef.reloadDiscountInfo(!0)},sellPriceChangeFn:function(){this.orderData.loan.itemInfo&&this.orderData.loan.itemInfo.theftInsuranceInfo&&this.$refs.itemInfoRef&&this.$refs.itemInfoRef.updateTheftBasePrice(),this.orderData.loan.marginInfo&&this.$refs.marginInfoRef&&this.$refs.marginInfoRef.updateMarginCalc(),this.orderData.loan.calcInfo&&this.$refs.calcInfoRef&&this.$refs.calcInfoRef.updateCalcAmount()},updateFullLoanData:function(e){var n=this;if(console.log(e),this.calcres.data.splice(0),!e)return!1;var t=e.financeCalculationInfo;if(t&&t.financeCalculationTableList){var a=["custCostRate","custFinanceAmount","custInterestRate","custMonthlyAmount","loanPayableAmount","riskControlFinanceAmount","riskFinanceAmount"];t.financeCalculationTableList.forEach(function(e){a.forEach(function(n){e[n]=""+(0,h.stringToNumber)(e[n])}),n.calcres.data.push(e)}),this.showCalcRes=!0}this.orderData.loan.calcInfo.financeCalculationTableList=this.calcres.data;var i=this.orderData.loan.itemInfo,o=e.financeItemInfo;if(i&&o){if(i.insuranceInfo&&i.insuranceInfo.insuranceItemList&&o.insuranceInfo&&o.insuranceInfo.insuranceItemList&&i.insuranceInfo.insuranceItemList.forEach(function(e,t){var a=o.insuranceInfo.insuranceItemList[t];["insurancMinPrice","insuranceMaxPrice","insuranceAmount"].forEach(function(t){n.$set(e,t,""+(0,h.stringToNumber)(a[t]))})}),i.gpsInfo&&o.gpsInfo){["increasePriceMax","increasePriceMin"].forEach(function(e){n.$set(i.gpsInfo,e,""+(0,h.stringToNumber)(o.gpsInfo[e]))})}if(i.theftInsuranceInfo&&o.theftInsuranceInfo){["basePrice","increasePrice","increaseMaxPrice","increaseMinPrice","totalPrice"].forEach(function(e){n.$set(i.theftInsuranceInfo,e,""+(0,h.stringToNumber)(o.theftInsuranceInfo[e]))})}i.otherFinanceInfo&&o.otherFinanceInfo&&i.otherFinanceInfo.forEach(function(e,t){var a=o.otherFinanceInfo[t];n.$set(e,"financePrice",""+(0,h.stringToNumber)(a.financePrice))}),this.orderTabs[1].hasSaved||this.cacheData("itemInfo")}var r=this.orderData.loan.marginInfo,s=e.financeMarginInfo;r&&s&&(this.$set(r,"marginAmount",""+(0,h.stringToNumber)(s.marginAmount)),this.$set(r,"marginProportion",""+(0,h.stringToNumber)(s.marginProportion)),this.orderTabs[1].hasSaved||this.cacheData("marginInfo"));var c=this.orderData.loan.discountInfo,l=e.financeDiscountInfo;c&&l&&(c.feeDiscountInfo&&l.feeDiscountInfo&&(this.$set(c.feeDiscountInfo,"poundageAmount",""+(0,h.stringToNumber)(l.feeDiscountInfo.poundageAmount)),this.$set(c.feeDiscountInfo,"dealerDiscountAmount",""+(0,h.stringToNumber)(l.feeDiscountInfo.dealerDiscountAmount)),this.$set(c.feeDiscountInfo,"manufacturerDiscountAmount",""+(0,h.stringToNumber)(l.feeDiscountInfo.manufacturerDiscountAmount)),this.$set(c.feeDiscountInfo,"discountTotalAmount",""+(0,h.stringToNumber)(l.feeDiscountInfo.discountTotalAmount)),this.$set(c.feeDiscountInfo,"ratioValue",""+(0,h.stringToNumber)(l.feeDiscountInfo.ratioValue))),c.rateDiscountInfo&&l.rateDiscountInfo&&(this.$set(c.rateDiscountInfo,"dealerDiscountAmount",""+(0,h.stringToNumber)(l.rateDiscountInfo.dealerDiscountAmount)),this.$set(c.rateDiscountInfo,"manufacturerDiscountAmount",""+(0,h.stringToNumber)(l.rateDiscountInfo.manufacturerDiscountAmount)),this.$set(c.rateDiscountInfo,"discountTotalAmount",""+(0,h.stringToNumber)(l.rateDiscountInfo.discountTotalAmount)),this.$set(c.rateDiscountInfo,"ratioValue",""+(0,h.stringToNumber)(l.rateDiscountInfo.ratioValue))),this.orderTabs[1].hasSaved||this.cacheData("discountInfo"));var u=this.orderData.loan.calcInfo;if(u&&e.financeCalculationInfo){["downPaymentProportion","downPaymentAmount","finalPaymentProportion","finalPaymentAmount"].forEach(function(t){n.$set(u,t,""+(0,h.stringToNumber)(e.financeCalculationInfo[t]))}),this.orderTabs[1].hasSaved||this.cacheData("calcInfo")}},todoCalc:function(){var e=this;this.calcres.data.splice(0),this.validate(function(n){if(!n)return e.errorModal("请先完善贷款基本信息之后再进行试算！");var t=e.getSaveData(),a=polarisserver+"/finance/calculation/financeInfo";e.showLoading(),e.$http.post(a,t).then(function(n){e.hideLoading();var t=n.data;if(t.data&&(e.updateFullLoanData(t.data),e.$nextTick(function(){e.todoRecount()})),!t.success)return e.errorModal(t.errorMessage||"请求贷款试算失败")}).catch(function(n){e.hideLoading(),e.errorCatchModal("请求贷款试算出错：",n)})})},toSave:function(e){var n=this;return new a.default(function(t,a){n.validate(function(i){if(i){n.showLoading();var o=n.getSaveData();o.saveFrom="PC";var r=polarisserver+"/finance/save/financeInfo";n.$http.post(r,o).then(function(a){n.hideLoading();var i=a.data;n.setOrderLoanTabSaved(i.success),i.data&&(n.updateFullLoanData(i.data),n.$nextTick(function(){n.todoRecount()})),i.success?(e||n.$Message.success("贷款信息保存成功!"),t(!0)):(n.errorModal(i.errorMessage||"贷款信息保存失败"),t(!1))}).catch(function(e){n.hideLoading(),n.setOrderLoanTabSaved(!1),n.errorCatchModal("贷款信息保存请求出错：",e),a(e)})}else t(!1)})})},scrollToValid:function(n){var t=this;this.$nextTick(function(){if(!n){var a=e(".apply-loan-module .ivu-form-item-error")[0];if(a&&a.getBoundingClientRect){var i=a.getBoundingClientRect(),o=document.documentElement.scrollTop||document.body.scrollTop,r=i.top+o-200;(0,h.scrollTo)(document,r,300)}}t.setOrderModuleError({index:1,hasError:!n})})},validate:function(e){var n=this,t=[];["baseInfoRef","itemInfoRef","marginInfoRef","discountInfoRef","calcInfoRef"].forEach(function(e){t.push(new a.default(function(t){n.$refs[e]?n.$refs[e].validate(function(e){t(e)}):t(!0)}))}),a.default.all(t).then(function(t){var a=_.every(t);n.scrollToValid(a),e&&e(a)})}})}}).call(n,t("L7Pj"))},pDAh:function(e,n,t){"use strict";var a={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"apply-loan-module"},[e.hasBaseInfo?t("order-loan-base-form",{ref:"baseInfoRef",staticClass:"cm-panel",on:{"on-sellpricechange":e.sellPriceChangeFn,"on-financeperiodchange":e.financePeriodChangeFn}}):e._e(),e._v(" "),t("div",{class:e.loanNextDisabled?"mask-disabled":""},[e.loanNextDisabled?t("div",{staticClass:"mask-disabled-content"},[e._m(0)]):e._e(),e._v(" "),e.hasBaseInfo&&e.hasItemInfo?t("order-loan-item-form",{ref:"itemInfoRef"}):e._e(),e._v(" "),e.hasBaseInfo&&e.hasDiscountInfo?t("order-loan-discount-form",{ref:"discountInfoRef"}):e._e(),e._v(" "),e.hasBaseInfo&&e.hasMarginInfo?t("order-loan-margin-form",{ref:"marginInfoRef"}):e._e(),e._v(" "),e.hasBaseInfo?t("order-loan-calc-form",{ref:"calcInfoRef"}):e._e(),e._v(" "),t("div",{staticClass:"cm-panel",staticStyle:{"margin-top":"-34px"}},[t("div",{staticClass:"text-center"},[t("Button",{attrs:{type:"primary","custom-icon":"iconfont icon-calculator"},on:{click:e.todoCalc}},[e._v("贷款试算")])],1),e._v(" "),e.showCalcRes?t("i-table",{staticClass:"table-only-horizon-line margin-t-20",attrs:{total:e.calcres.total,loading:e.calcres.loading,border:"",columns:e.calcres.columns,data:e.calcres.data}}):e._e()],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"mask-disabled-body"},[n("div",{staticClass:"ivu-modal-confirm-head"},[n("div",{staticClass:"ivu-modal-confirm-head-icon ivu-modal-confirm-head-icon-confirm"},[n("i",{staticClass:"ivu-icon ivu-icon-md-alert"})]),this._v(" "),n("div",{staticClass:"ivu-modal-confirm-head-title"},[this._v("提示")])]),this._v(" "),n("div",{staticClass:"ivu-modal-confirm-body"},[n("div",[this._v("请先完善贷款基本信息。")])])])}]};n.a=a},uZu1:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.amountRequireValidator=void 0;var a=t("ZgZx"),i=t("VSB1");n.amountRequireValidator=function(e,n){return{validator:function(n,t,a){i.yx.isEmpty(t)?a(new Error(e+"不得为空")):/^((\d+\d*)|(\d+\d*\.\d{1,2}))$/.test(t)?a():a(new Error(e+"填写错误"))},trigger:"change"}};n.default={loanBasicRule:{businessType:[(0,a.required)("业务类型")],leaseType:[(0,a.required)("租赁属性")],repaymentMode:[(0,a.required)("还款方式")],repaymentFrequency:[(0,a.required)("还款频率")],financePeriod:[(0,a.required)("融资期限")],purchasePurpose:[(0,a.required)("购车目的")],carCommercialType:[(0,a.required)("车辆使用性质")],actualSellingPrice:[],isResourceCar:[(0,a.required)("是否资源车")],carType:[(0,a.required)("车辆类型")],mileage:[{validator:function(e,n,t){i.yx.isEmpty(n)?t(new Error("公里数不能为空")):/^([1-5]\d|\d)(\.\d{1,2})?$|^60(\.[0]{1,2})?$/.test(n)?0==(0,i.stringToNumber)(n)?t(new Error("公里数必须大于0！")):t():t(new Error("公里数只能输入0 - 60"))},trigger:"change"}],carEstimatedPrice:[],vinNum:[(0,a.required)("车架号（VIN码）"),{validator:a.validators.isVehicleVin,trigger:"change"}],productionDate:[],initialDate:[],provinceCode:[(0,a.required)("")],cityCode:[(0,a.required)("")],licenseSequence:[(0,a.required)(""),{validator:a.validators.licenseSequence,trigger:"change"}],carEvaluationAgency:[(0,a.required)("二手车评估机构")],isReverseMortgage:[(0,a.required)("是否反贷")],carInvoiceDate:[{validator:function(e,n,t){""==n?t(new Error("车辆开票日期不能为空")):"[object Date]"==Object.prototype.toString.call(n)||"string"==typeof n?t():t(new Error("车辆开票日期格式不对"))},trigger:"change"}],carTransferDate:[{validator:function(e,n,t){""==n?t(new Error("车辆过户完成日期不能为空")):"[object Date]"==Object.prototype.toString.call(n)||"string"==typeof n?t():t(new Error("车辆过户完成日期格式不对"))},trigger:"change"}],plate_Region:[a.validators.regionValidator("预计上牌",2)],custPrimaryChannel:[(0,a.required)("客户一级渠道")],transferTimes:[{validator:function(e,n,t){i.yx.isEmpty(n)?t(new Error("车辆过户次数不能为空")):/^([1-9]\d|\d)$|^100$/.test(n)?t():t(new Error("车辆过户次数只能输入0 - 100"))},trigger:"change"}],compulsoryInsuranceExpiryDate:[{validator:function(e,n,t){""==n?t(new Error("交强险失效日不能为空")):"[object Date]"==Object.prototype.toString.call(n)||"string"==typeof n?t():t(new Error("交强险失效日格式不对"))},trigger:"change"}]},loanInsuranceRule:{isFinanceInsurance:[(0,a.required)("是否融保险")],insuranceChannel:[(0,a.required)("保险出单地")],insuranceMode:[(0,a.required)("商业险出单方式")],itemRule:{insuranceKind:[{type:"array",required:!0,message:"险种不能为空",trigger:"change"}],insuranceAmount:[{required:!0,type:"number",message:"融资额不能为空",trigger:"change"}]}},loanGpsRule:{custPrimaryChannel:[(0,a.required)("客户一级渠道")],gpsSupplier:[(0,a.required)("GPS厂商")],gpsPriceType:[(0,a.required)("GPS价格类型")],gpsBasePrice:[{required:!0,type:"number",message:"GPS基础价金额不能为空",trigger:"change"}],gpsIncreasePrice:[{required:!0,type:"number",message:"GPS加价金额不能为空",trigger:"change"}],increaseFinanceType:[(0,a.required)("GPS加价放款类型")]},loanTheftRule:{buyTheftInsurance:[(0,a.required)("是否融盗抢责任险")],increaseFinancePeriod:[(0,a.required)("盗抢责任险加融期限")],increasePriceType:[(0,a.required)("盗抢责任险加价类型")],isGift:[(0,a.required)("是否赠送")]},loanOtherRule:{financeSelected:[(0,a.required)("融资项档次")],financeAmount:[{required:!0,type:"number",message:"融资项金额不能为空",trigger:"change"}]},feeDiscountInfoRule:{},loanTiexiRule:{isDiscount:[(0,a.required)("是否贴息")]},loanDepositRule:{marginType:[(0,a.required)("保证金设定")],marginAmount:[],isOffset:[(0,a.required)("保证金是否冲抵")]},loanCalcRule:{}}},v7Zi:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("ao0m"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,function(){return a[e]})}(o);var r=t("wAck"),s=t("C7Lr")(i.a,r.a,!1,null,null,null);n.default=s.exports},v8v7:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("2s5e"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,function(){return a[e]})}(o);var r=t("MJFL"),s=t("C7Lr")(i.a,r.a,!1,null,null,null);n.default=s.exports},wAck:function(e,n,t){"use strict";var a={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"insurance-drop-panel"},[t("div",{staticClass:"insurance-drop-header",on:{click:e.handleCheckAll}},[t("Checkbox",{attrs:{indeterminate:e.indeterminate,value:e.checkAll}}),e._v(" "),t("span",{staticClass:"insurance-drop-alltext"},[e._v("全选")])],1),e._v(" "),t("CheckboxGroup",{staticStyle:{height:"128px",overflow:"auto"},on:{"on-change":e.checkAllGroupChange},model:{value:e.checkAllGroup,callback:function(n){e.checkAllGroup=n},expression:"checkAllGroup"}},e._l(e.insTypesDict,function(n,a){return t("label",{key:a,staticClass:"ivu-select-item",staticStyle:{display:"block"}},[t("Checkbox",{attrs:{label:n.dictCode}},[e._v(e._s(n.dictName))])],1)}),0)],1)},staticRenderFns:[]};n.a=a},wWME:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a,i=t("VfUO"),o=(a=i)&&a.__esModule?a:{default:a},r=t("VSB1");t("ZgZx");n.default={name:"marginInfo",mixins:[o.default],props:{},components:{},data:function(){return{isFixedAmount:!1,isFixedRatio:!1,isEditable:!1,marginMethod:0,DICT_marginIsOffset:[]}},computed:{marginAmountDisabled:function(){if("3"!=this.marginMethod)return!0;var e=this.marginInfo.marginAmount,n=this.marginInfo.marginProportion;return(""===e||null===e)&&!(""===n||null===n)},marginPctDisabled:function(){if("3"!=this.marginMethod)return!0;var e=this.marginInfo.marginAmount,n=this.marginInfo.marginProportion;return!(""===e||null===e||""!==n&&null!==n)}},mounted:function(){var e=this;this.queryDictData(["whether"]),"1"==this.baseInfo.hasMargin&&this.queryInitData("marginInfo",function(){e.marginMethod=r.yx.getMarginMethod(e.marginInfo.marginType),e.isFixedAmount="1"==e.marginMethod,e.isFixedRatio="2"==e.marginMethod,e.isEditable="3"==e.marginMethod,e.DICT_marginIsOffset=e.dp.whether,"1"!=e.marginMethod&&"2"!=e.marginMethod||""===e.sellingAmount||e.updateMarginCalc(),e.$nextTick(function(){e.todoRecount()})})},methods:{createMarginAmountRule:function(){var e=this;return[{validator:function(n,t,a){var i=t,o=e.marginInfo.marginProportion;"3"==e.marginMethod&&r.yx.isEmpty(i)&&r.yx.isEmpty(o)?a(new Error("保证金金额和保证金比例必须填一项")):"2"!=e.marginMethod&&"3"!=e.marginMethod||r.yx.isEmpty(o)||!r.yx.isEmpty(i)?r.yx.amountReg.test(t)?a():a(new Error("保证金金额格式不对")):a()},trigger:"change"}]},createMarginRatioRule:function(){var e=this;return[{validator:function(n,t,a){var i=e.marginInfo.marginAmount,o=t;"3"==e.marginMethod&&r.yx.isEmpty(i)&&r.yx.isEmpty(o)?a(new Error("保证金金额和保证金比例必须填一项")):"1"!=e.marginMethod&&"3"!=e.marginMethod||r.yx.isEmpty(i)||!r.yx.isEmpty(o)?r.yx.pctReg.test(t)?a():a(new Error("保证金比例只能输入0 - 100")):a()},trigger:"change"}]},updateMarginCalc:function(e){if(e&&this.isEditable||this.isFixedAmount){var n=(0,r.stringToNumber)(this.marginInfo.marginAmount||0);if(0==n||0==this.sellingAmount)return void(this.marginInfo.marginProportion=0);var t=(0,r.floatDiv)((0,r.floatMul)(n,100),this.sellingAmount);this.marginInfo.marginProportion=(0,r.stringToNumber)(t.toFixed(2)),this.$refs.marginInfo&&this.$refs.marginInfo.validateField("marginProportion")}else if(this.isEditable||this.isFixedRatio){var a=(0,r.stringToNumber)(this.marginInfo.marginProportion||0);if(0==a||0==this.sellingAmount)return void(this.marginInfo.marginAmount=0);var i=(0,r.floatMul)((0,r.floatDiv)(a,100),this.sellingAmount);this.marginInfo.marginAmount=(0,r.stringToNumber)(i.toFixed(2)),this.$refs.marginInfo&&this.$refs.marginInfo.validateField("marginAmount")}},handleBlur:function(e){var n=this,t=e.target.parentNode.getAttribute("v")||e.target.parentNode.parentNode.getAttribute("v");"marginInfo.marginAmount"==t&&this.updateMarginCalc(!0),this.isEditable&&"marginInfo.marginProportion"==t&&this.updateMarginCalc(),this.$nextTick(function(){n.cacheData("marginInfo"),n.todoRecount()})},handleChange:function(e,n){var t=this;this.$nextTick(function(){t.cacheData("marginInfo"),t.todoRecount()})},validate:function(e){this.$refs.marginInfo?this.$refs.marginInfo.validate(function(n){e&&e(n)}):e&&e(!0)}}}}});
//# sourceMappingURL=3.25c294c4af06297aabc6.js.map