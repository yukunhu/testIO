webpackJsonp([11],{"4RNQ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(a("lC5x")),i=f(a("J0Oq")),s=f(a("4YfN")),o=a("R4Sj"),n=f(a("yRIw")),l=f(a("29/3")),d=f(a("wmTk")),c=f(a("JyLo")),m=a("VSB1"),u=a("ZgZx");function f(e){return e&&e.__esModule?e:{default:e}}var h=void 0;t.default={name:"orderCredit",components:{applySteps:d.default},data:function(){return{dp:{},account:this.$store.state.app.userInfo.userAccount,userName:this.$store.state.app.userInfo.userName,websocketUrl:this.$store.state.app.userInfo.websocketUrl,title:"征信授权",ruleValidate:u.validateRules.preauthPage,bankRuleValidate:u.validateRules.preauthPage,showPreviewModal:!1,previewUrl:"",dateGroup:[],uploadFile:[{itemID:"applicantOrderIdPositive",title:"上传身份证人像面"},{itemID:"applicantOrderIdReverse",title:"上传身份证国徽面"},{itemID:"creditCardPositive",title:"识别银行卡照片"}],formBankData:{validDate:"",bankcardNo:"",phone:"",credit_type:"1",weixinRes:void 0},formData:{orderId:"",requestId:"",customerType:"1",name:"",certNo:"",race:"",address:"",validDate:"",validStartDate:"",validEndDate:"",sfzres:""},allDisabled:!1,showMiniResModal:!1,showFailMiniResModal:!1,qrCode:"",loading:!1,sendSmsText:"发送短信",Cos:void 0,socklinkError:!1}},computed:{sfzCompleted:function(){return""!=(""!=(this.uploadFile[0].remoteKey&&this.uploadFile[1].remoteKey)&&this.formData.name&&this.formData.certNo&&this.formData.race&&this.formData.address&&this.formData.validDate)},isSfzFileEmpty:function(){return""==this.uploadFile[0].remoteKey||this.uploadFile[0].error},isSfzFileEmpty_back:function(){return""==this.uploadFile[1].remoteKey||this.uploadFile[1].error},sfzyzSuccess:function(){return"1"==this.formData.sfzres},sendSmsDisabled:function(){var e=/^1[3|4|5|6|7|8|9]\d{9}$/.test(this.formBankData.phone),t=(0,u.bankCardCheck)(this.formBankData.bankcardNo);return!e||!t||this.allDisabled},preauthBtnDisabled:function(){return!this.sfzyzSuccess||!this.formBankData.weixinRes||this.sendSmsDisabled},weixinResClass:function(){var e=this.formBankData.weixinRes;return!0===e?"step-badge-status-success":!1===e?"step-badge-status-error":""},weixinResText:function(){var e=this.formBankData.weixinRes;return!0===e?"通过":!1===e?"失败":"未识别"}},created:function(){},mounted:function(){var e=this;this.queryDictData(["race","creditType"]).then(function(t){e.dp=t}),document.title="进件提报-征信授权",this.uploadFile.forEach(function(t,a){e.initUploadFile(a)}),this.queryInit()},destroyed:function(){h&&h.disconnect()},methods:(0,s.default)({},(0,o.mapMutations)("app",["showLoading","hideLoading"]),(0,o.mapActions)("dict",["queryDictData"]),{fnReset:function(e){this.$refs[e].resetFields()},partialReset:function(e,t){this.$refs[e].fields.forEach(function(e){e.prop==t&&e.resetField()})},connect:function(){var e=this,t=new n.default(this.websocketUrl+"?username="+this.account);(h=l.default.over(t)).connect({},function(t){var a=t.headers["user-name"];console.log("人脸识别已连接【"+t+"】"),e.socklinkError=!1,h.subscribe("/user/"+e.formData.requestId+a+"/message",function(t){e.acceptMessage(t)})},function(t){console.log("人脸识别连接失败【"+t+"】"),e.socklinkError=!0,e.formBankData.credit_type="2",e.errorModal("人脸识别连接失败,请使用银行短信验证或刷新后重试!")})},acceptMessage:function(e){var t=JSON.parse(e.body),a=t.extendValue.result;"FACE_RECOGNITION"==t.messageType&&(a?this.formBankData.weixinRes=!0:(this.formBankData.weixinRes=!1,this.errorModal(t.extendValue.errorMessage||"识别失败")))},errorModal:function(e,t,a){var r={title:"提示",content:e,closable:!1,okText:a||"确 定",maskClosable:!1};t&&(r.onOk=t),this.$Modal.error(r)},initUploadFile:function(e){var t=this,a=this.uploadFile[e];["qcloudUrl","bloburl","name","hash","hashName","remoteKey","ext","file","size","loading","error"].forEach(function(e){t.$set(a,e,"")})},queryInit:function(){var e=this;return(0,i.default)(r.default.mark(function t(){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.showLoading(),e.$http.post(polarisserver+"/credit/getTransactionId/T",{}).then(function(t){e.hideLoading();var a=t.data;if(window.orderNo=a.data.orderNo,!a.success||!a.data||!a.data.orderNo)return e.errorModal(a.errorMessage||"授权ID请求失败");e.formData.requestId=a.data.orderNo;var r={businessType:"credit",orderId:a.data.orderNo,viewCode:"yixin_xiaofei_tibao_polaris",orderUserId:e.account,orderUserName:e.userName};e.Cos=new c.default(r)}).catch(function(t){e.hideLoading(),e.errorCatchModal("授权ID请求出错：",t)});case 2:case"end":return t.stop()}},t,e)}))()},getNewOrder:function(e){var t=this,a={orderId:e,sysId:"2",traceId:this.formData.requestId};this.showLoading(),this.$http.post(polarisserver+"/credit/createOrderForReuse",a).then(function(e){t.hideLoading();var a=e.data;if(!a.success)return t.errorModal(a.errorMessage||"复用已授权信息请求失败");t.goToPreaudit(a.data.orderId)}).catch(function(e){t.hideLoading(),t.errorCatchModal("复用已授权信息请求出错：",e)})},goToPreaudit:function(e){this.$router.replace({name:"orderPreaudit",query:{orderNo:e},params:{customerType:"1"}})},backToList:function(e){this.$router.replace({name:"orderList"})},checkCredit:function(){var e=this,t=this.formData,a={traceId:t.requestId,custName:t.name,idCard:t.certNo,sysId:"2",race:t.race};this.$refs.formData.validate(function(t){if(!t)return e.errorModal("表单填写未通过，请检查!");e.showLoading(),e.$http.post(polarisserver+"/credit/checkIdCard",a).then(function(t){e.hideLoading();var a=t.data;if(!a.success)return e.errorModal(a.errorMessage||"身份验证请求失败");e.dealCheckCreditErrorCode(a)}).catch(function(t){e.hideLoading(),e.errorCatchModal("身份验证请求出错：",t)})})},getQrCode:function(){var e=this;this.showLoading();var t={account:this.account,custName:this.formData.name,idCard:this.formData.certNo,traceId:this.formData.requestId};this.$http.post(polarisserver+"/credit/getQrCode",t).then(function(t){e.hideLoading();var a=t.data;if(!a.success)return e.errorModal(a.errorMessage||"二维码请求失败");e.qrCode="data:image/jpeg;base64, "+a.data.qrCode,e.connect()}).catch(function(t){e.hideLoading(),e.errorCatchModal("二维码请求出错：",t)})},todoSendCredit:function(e){var t=this,a=this.formData,r=this.formBankData,i="1"==e?"100606":"2"==e?"100601":"3"==e?"100608":"",s="1"==e?"100901":"2"==e?"100903":"3"==e?"100907":"",o="3"==e?polarisserver+"/credit/createOauthRecord":polarisserver+"/credit/checkTelAndBankNo",n={custName:a.name,idCard:a.certNo,validStartDate:a.validStartDate,validEndDate:a.validEndDate,nation:a.race,censusAddress:a.address,custTel:r.phone,bankCardNo:r.bankcardNo,oauthStatus:i,processType:s,sysId:"2",traceId:a.requestId};this.showLoading(),this.$http.post(o,n).then(function(a){t.hideLoading();var r=a.data;return r.success?"3"==e?t.dealOauthResult(r):void t.dealSubmitCreditErrorCode(r):t.errorModal("3"==e?"短信发送失败，请重试！":r.errorMessage||"提交征信授权请求失败")}).catch(function(e){t.hideLoading(),t.errorCatchModal("提交征信授权请求出错：",e)})},submitCredit:function(){var e=this;this.$refs.formBankData.validate(function(t){if(!t)return e.errorModal("表单填写未通过，请检查!");var a="2"==e.formBankData.credit_type?"2":"1";e.todoSendCredit(a)})},dealOauthResult:function(e){var t=e.data;if(!t||!t.orderId)return this.errorModal("未生成订单号，请重试！");this.showMiniResModal=!0},dealSubmitCreditErrorCode:function(e){if(!e||!e.data)return this.errorModal("征信授权请求返回数据为空");var t=e.data;switch(t.matchResult){case"100709":case"100712":this.showFailMiniResModal=!0;break;case"100708":if(!t.orderId)return this.errorModal("未生成订单号，请重试！");"2"==this.formBankData.credit_type?this.showMiniResModal=!0:this.goToPreaudit(t.orderId);break;default:var a=e.errorMessage||"验证未通过";this.errorModal(a)}},dealCheckCreditErrorCode:function(e){var t=this,a=e.data;switch(a.matchResult){case"100201":this.formData.sfzres="1",this.getQrCode();break;case"100203":return this.allDisabled=!0,this.errorModal("未查到该用户信息，请关闭该单！",void 0,"关 闭");case"100204":return this.errorModal("校验失败，请尝试修改用户信息！",void 0,"关 闭");case"100301":return this.allDisabled=!0,this.errorModal("该用户为高危用户，请关闭该单！",void 0,"关 闭");case"100303":return this.formData.orderId=a.orderId,this.$Modal.confirm({title:"提示",content:'该用户已完成征信授权，建议您“继续"本单',okText:"继 续",onOk:function(){t.getNewOrder(e.data.orderId)},cancelText:"放 弃",onCancel:function(){t.clearCertFrontField(),t.clearCertBackField(),t.fnReset("formData")}});default:this.formData.sfzres="",this.errorModal("校验失败，尝试修改用户信息")}},closeMiniResModal:function(){this.showMiniResModal=!1,this.$router.back()},sendFaceSms:function(){this.showFailMiniResModal=!1,this.todoSendCredit("3")},selectFile:function(e){return!this.allDisabled&&(this.Cos?1!=e||this.uploadFile[0].remoteKey&&!this.uploadFile[0].error?(this.inputIndex=e,this.$refs.fileInput.value="",void this.$refs.fileInput.click()):this.errorModal("请先上传身份证正面！"):this.$Message.error("附件上传参数未获取成功，请稍后重新进入本页再试"))},deleteFile:function(e){var t=this;if(this.allDisabled)return!1;this.$Modal.confirm({title:"提示",content:"您确定要删除吗？",okText:"删 除",cancelText:"取 消",onOk:function(){0===e?(t.fnReset("formData"),t.clearCertFrontField(),t.clearCertBackField(),t.clearAuthField()):1===e?(t.clearCertBackField(),t.clearAuthField(),t.partialReset("formData","validDate")):2===e&&t.clearBankcardField()}})},previewFile:function(e){var t=this.uploadFile[e];this.showPreviewModal=!0,this.previewUrl=t.bloburl},changeImage:function(e){var t=this,a=e.target.files;if(a&&a.length){var r=a[0];m.yx.optim(r,2359296,function(e){if(e.size>2359296)return t.errorModal("文件大小超过允许上传的最大值，请重新选择！");t.loadFile(e)})}},clearCertFrontField:function(){this.formData.sfzres="",this.formData.name="",this.formData.certNo="",this.formData.address="",this.formData.race="",this.initUploadFile(0)},clearCertBackField:function(){this.formData.sfzres="",this.formData.validDate="",this.formData.validStartDate="",this.formData.validEndDate="",this.initUploadFile(1)},clearBankcardField:function(){this.formBankData.bankcardNo="",this.initUploadFile(2)},clearAuthField:function(){this.formBankData.phone="",this.clearBankcardField()},loadFile:function(e){var t=this,a=this.inputIndex;0===a?(this.formData.sfzres="",this.clearCertFrontField(),this.clearCertBackField()):1===a&&(this.formData.sfzres="",this.clearCertBackField());var r=this.uploadFile[a];this.$set(r,"loading",!0),this.$set(r,"pct","0%");var i=e.name.lastIndexOf(".");i>0&&e.name.substring(i+1).toLowerCase(),this.Cos.convertBlobInfo(e,function(i){r.name=i.name,r.bloburl=i.bloburl,r.hash=i.hash,r.hashName=i.hashName,t.todoUpload(e,a)})},todoUpload:function(e,t){var a=this,r=this.uploadFile[t];if(!r)return!1;this.Cos.cosUpload({hashName:r.hashName,file:e,onProgress:function(e){var t=parseInt(100*e.percent)||0;a.$set(r,"pct",t+"%")},complete:function(i,s){if(a.$set(r,"loading",!1),i)return a.$set(r,"error",!0),a.errorModal("上传文件到腾讯云出错："+i.statusCode+" "+i.error.Message);a.$set(r,"size",e.size),a.$set(r,"name",e.name),a.$set(r,"remoteKey",s.remoteKey),a.Cos.saveItemToYun(r,function(e){if(!e||!e.items)return a.$set(r,"error",!0),!1;var i=e.items[0];i&&i.files&&i.files[0]&&i.files[0].previewUrl?(a.$set(r,"qcloudUrl",i.files[0].previewUrl),a.todoOcr(t)):a.$set(r,"error",!0)})}})},saveItem:function(e){var t=this.uploadFile[e];if(!t)return!1;this.Cos.token;return(this.Cos.items[t.itemID]?this.Cos.items[t.itemID].title:"")?void 0:this.errorModal("该附件未在模板中定义")},setOcrRes:function(e,t){if(0===e)this.formData.name=t.name,this.formData.certNo=t.idcard,this.formData.race=t.nationCode,this.formData.address=t.address;else if(1===e){this.formData.validDate=t.validDate,this.formData.validStartDate=t.validStartDate;var a=(new Date).format("yyyy-MM-dd"),r=new Date(a);if(new Date(t.validEndDate).getTime()-r.getTime()<0)return this.deleteFile(1),this.errorModal("身份证已失效");this.formData.validEndDate=t.validEndDate}else 2===e&&(this.formBankData.bankcardNo=t.bankcardNo)},todoOcr:function(e){var t=this,a=2==e,r=this.uploadFile[e],i=a?polarisserver+"/credit/scanBankCard":polarisserver+"/credit/scanIdCard",s={};s=2==e?{traceId:this.formData.requestId,transactionId:this.formData.requestId,sysId:"2",bankcardUrlStr:r.qcloudUrl}:{traceId:this.formData.requestId,transactionId:this.formData.requestId,sysId:"2",cardType:""+e,idcardUrlStr:r.qcloudUrl},this.showLoading(),this.$http.post(i,s).then(function(a){t.hideLoading();var i=a.data;if(!i.success)return t.$set(r,"error",!0),t.errorModal(i.errorMessage||"识别失败，请重新上传!");var s=i.data;if(!s)return t.$set(r,"error",!0),t.errorModal("识别失败，请重新上传!");t.setOcrRes(e,s)}).catch(function(e){t.hideLoading(),t.$set(r,"error",!0),t.errorCatchModal("图片识别请求出错：",e)})},cancelEdit:function(){var e=this;this.$Modal.confirm({title:"提示",closable:!1,maskClosable:!1,content:"确认放弃此次征信授权？",okText:"确认放弃",cancelText:"继续编辑",onOk:function(){e.$router.back()}})},handleRemove:function(e){var t=this;this.$Modal.confirm({content:"确认删除此图片？",onOk:function(){t.initUploadFile(e),t.$Message.info("已删除")}})}})}},Qajj:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("4RNQ"),i=a.n(r);for(var s in r)"default"!==s&&function(e){a.d(t,e,function(){return r[e]})}(s);var o=a("nbZd");var n=function(e){a("fyKL")},l=a("C7Lr")(i.a,o.a,!1,n,"data-v-63c9f3c7",null);t.default=l.exports},fyKL:function(e,t){},nbZd:function(e,t,a){"use strict";var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"margin-tb-10 margin-lr-20 layout-content preauth-page-container"},[a("div",{staticClass:"margin-b-10"},[a("apply-steps",{attrs:{"active-step":1}})],1),e._v(" "),a("div",{staticClass:"cm-panel"},[a("i-form",{ref:"formData",attrs:{model:e.formData,"label-width":120,rules:e.ruleValidate}},[a("h3",[e._v("征信授权")]),e._v(" "),a("div",{staticClass:"info-title-header margin-t-14 margin-b-24"},[a("span",{staticClass:"info-title-title"},[e._v("身份证上传 "),a("span",{staticStyle:{color:"#999","font-weight":"normal"}},[e._v("(必须先上传人像面)")])])]),e._v(" "),a("input",{ref:"fileInput",style:"display:none;",attrs:{id:"fileInput",type:"file",name:"file",accept:"image/jpeg,image/jpg,image/png"},on:{change:function(t){return e.changeImage(t)}}}),e._v(" "),a("div",{staticClass:"upload-container",staticStyle:{width1:"428px",margin:"auto","text-align":"center"}},[e._l(e.uploadFile,function(t,r){return r<2?[a("div",{staticClass:"mfile-cell-box"},[a("div",{staticClass:"mfile-cell-con"},[a("div",{staticClass:"mfile-cell"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.error||!t.loading&&!t.remoteKey&&!t.bloburl,expression:"item.error || ((!item.loading && !item.remoteKey) && !item.bloburl)"}],staticClass:"mfile-img-con",class:t.error?"mfile-upload-error":""},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!item.loading"}],staticClass:"mfile-file-add",on:{click:function(t){return e.selectFile(r)}}},[a("div",{staticClass:"mfile-file-add-iconbox"},[a("Icon",{attrs:{custom:"iconfont icon-add"}})],1)]),e._v(" "),t.error?a("div",{staticClass:"mfile-img-errortip"},[a("Icon",{staticStyle:{"vertical-align":"middle"},attrs:{custom:"iconfont icon-warn"}}),e._v(" "),a("span",[e._v("上传失败")])],1):e._e()]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:(t.loading||(t.loading||t.remoteKey)&&t.bloburl||t.error&&t.bloburl)&&!t.error,expression:"((item.loading || (item.loading || item.remoteKey) && item.bloburl) || (item.error && item.bloburl)) &&!item.error"}],staticClass:"mfile-img-con",class:t.error?"mfile-upload-error":""},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.bloburl||t.remoteKey,expression:"item.bloburl || item.remoteKey"}],staticClass:"mfile-img-con2"},[a("img",{attrs:{src:t.bloburl||t.remoteKey}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"item.loading"}],staticClass:"mfile-img-loading"},[a("Icon",{attrs:{custom:"iconfont icon-uploading"}}),e._v("\n                                        "+e._s(t.pct)+"\n                                    ")],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!item.loading"}],staticClass:"mfile-reset-con"},[a("Row",[a("i-col",{attrs:{span:"12"}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.deleteFile(r)}}},[a("Icon",{attrs:{custom:"iconfont icon-delete"}}),e._v("\n                                                删除")],1)]),e._v(" "),a("i-col",{attrs:{span:"12"}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.previewFile(r)}}},[a("Icon",{attrs:{custom:"iconfont icon-search"}}),e._v("\n                                                查看大图")],1)])],1)],1),e._v(" "),t.error?a("div",{staticClass:"mfile-img-errortip"},[a("Icon",{attrs:{type:"ios-information-outline",size:"16"}}),e._v(" "),a("span",[e._v("上传失败")])],1):e._e()])])]),e._v(" "),a("div",{staticClass:"mfile-cell-title"},[e._v(e._s(t.title))])])]:e._e()})],2),e._v(" "),a("div",{staticClass:"margin-t-10"},[a("Row",{},[a("i-col",{attrs:{xs:24,sm:12,md:8}},[a("Form-item",{attrs:{label:"姓名",prop:"name"}},[a("i-input",{attrs:{type:"text",disabled:e.sfzyzSuccess||e.isSfzFileEmpty||e.allDisabled,placeholder:"请输入"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),a("i-col",{attrs:{xs:24,sm:12,md:8}},[a("Form-item",{attrs:{label:"身份证号",prop:"certNo"}},[a("i-input",{attrs:{type:"text",disabled:"",placeholder:"请输入"},model:{value:e.formData.certNo,callback:function(t){e.$set(e.formData,"certNo",t)},expression:"formData.certNo"}})],1)],1),e._v(" "),a("i-col",{attrs:{xs:24,sm:12,md:8}},[a("Form-item",{attrs:{label:"民族",prop:"race"}},[a("i-select",{attrs:{type:"text",name:"race",disabled:e.sfzyzSuccess||e.isSfzFileEmpty||e.allDisabled,placeholder:"请选择"},model:{value:e.formData.race,callback:function(t){e.$set(e.formData,"race",t)},expression:"formData.race"}},e._l(e.dp.race,function(t,r){return a("i-option",{key:t.dictCode,attrs:{value:t.dictCode}},[e._v("\n                                    "+e._s(t.dictName)+"\n                                ")])}),1)],1)],1),e._v(" "),a("i-col",{attrs:{xs:24,sm:12,md:8}},[a("Form-item",{attrs:{label:"户籍地址",prop:"address"}},[a("i-input",{attrs:{type:"text",disabled:e.sfzyzSuccess||e.isSfzFileEmpty||e.allDisabled,placeholder:"请输入"},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}})],1)],1),e._v(" "),a("i-col",{attrs:{xs:24,sm:12,md:8}},[a("Form-item",{attrs:{label:"有效期限",prop:"validDate"}},[a("i-input",{attrs:{type:"text",disabled:"",placeholder:"请输入"},model:{value:e.formData.validDate,callback:function(t){e.$set(e.formData,"validDate",t)},expression:"formData.validDate"}})],1)],1),e._v(" "),a("i-col",{attrs:{xs:24,sm:12,md:8}},[a("Form-item",[a("i-button",{attrs:{type:"primary","custom-icon":"iconfont icon-verify",disabled:!e.sfzCompleted||"1"==e.formData.sfzres||e.allDisabled},on:{click:e.checkCredit}},[e._v("验证\n                            ")])],1)],1)],1)],1)]),e._v(" "),a("i-form",{ref:"formBankData",attrs:{model:e.formBankData,"label-width":120,rules:e.bankRuleValidate}},["1"==e.formData.sfzres?a("div",[a("div",{staticClass:"info-title-header margin-b-14",staticStyle:{"margin-top":"16px"}},[a("span",{staticClass:"info-title-title"},[e._v("银联鉴权")])]),e._v(" "),a("FormItem",{attrs:{label:"请选择鉴权方式"}},[a("RadioGroup",{attrs:{disabled:e.allDisabled},model:{value:e.formBankData.credit_type,callback:function(t){e.$set(e.formBankData,"credit_type",t)},expression:"formBankData.credit_type"}},e._l(e.dp.creditType,function(t){return a("Radio",{key:t.value,attrs:{label:t.value,disabled:e.allDisabled||e.socklinkError&&"1"==t.value}},[a("span",[e._v(e._s(t.name))])])}),1)],1),e._v(" "),"2"!=e.formBankData.credit_type?a("div",{staticClass:"centerdiv"},[a("div",{staticClass:"step-badge-header"},[a("span",{staticClass:"step-badge-num"},[e._v("1")]),e._v(" "),a("span",{staticClass:"step-badge-title"},[e._v("步骤一")]),e._v(" "),a("span",{staticClass:"step-badge-text"},[e._v("人脸识别")]),e._v(" "),a("span",{staticClass:"step-badge-status",class:e.weixinResClass},[e._v(e._s(e.weixinResText))])]),e._v(" "),a("div",{staticClass:"codeimg-con"},[a("img",{attrs:{src:e.qrCode}})]),e._v(" "),a("p",{staticClass:"text-center"},[e._v("推荐客户微信扫一扫，人脸识别快速完成授权")])]):e._e(),e._v(" "),"1"==e.formBankData.credit_type&&e.formBankData.weixinRes?a("div",{staticClass:"centerdiv"},[a("div",{staticClass:"step-badge-header"},[a("span",{staticClass:"step-badge-num"},[e._v("2")]),e._v(" "),a("span",{staticClass:"step-badge-title"},[e._v("步骤二")]),e._v(" "),a("span",{staticClass:"step-badge-text"},[e._v("银行卡验证")])])]):e._e(),e._v(" "),"2"==e.formBankData.credit_type||"1"==e.formBankData.credit_type&&e.formBankData.weixinRes?a("div",{staticClass:"centerdiv"},[a("Row",[a("i-col",{attrs:{xs:24,sm:16,md:20}},[a("Form-item",{attrs:{label:"姓名","label-width":190}},[a("i-input",{attrs:{type:"text",disabled:"",placeholder:"未填写"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),a("i-col",{attrs:{xs:24,sm:16,md:20}},[a("Form-item",{attrs:{label:"身份证号","label-width":190}},[a("i-input",{attrs:{type:"text",disabled:"",placeholder:"未填写"},model:{value:e.formData.certNo,callback:function(t){e.$set(e.formData,"certNo",t)},expression:"formData.certNo"}})],1)],1)],1),e._v(" "),a("Row",[a("i-col",{attrs:{xs:24,sm:16,md:20}},[a("Form-item",{attrs:{label:"银行卡号",prop:"bankcardNo","label-width":190}},[a("i-input",{attrs:{type:"text",disabled:e.allDisabled,placeholder:"请输入"},model:{value:e.formBankData.bankcardNo,callback:function(t){e.$set(e.formBankData,"bankcardNo",t)},expression:"formBankData.bankcardNo"}})],1)],1),e._v(" "),a("i-col",{attrs:{xs:24,sm:6,md:4}},[a("div",{staticStyle:{"margin-top":"1px","margin-left":"8px"}},[a("i-button",{staticClass:"color-primary font12",attrs:{type:"text",disabled:e.allDisabled,"custom-icon":"iconfont icon-scan"},on:{click:function(t){return e.selectFile(2)}}},[e._v("\n                                    识别银行卡照片\n                                ")])],1)])],1),e._v(" "),a("Row",[a("i-col",{attrs:{xs:24,sm:16,md:20}},[a("Form-item",{attrs:{label:"手机号",prop:"phone","label-width":190}},[a("i-input",{attrs:{type:"text",disabled:e.allDisabled,placeholder:"请输入"},model:{value:e.formBankData.phone,callback:function(t){e.$set(e.formBankData,"phone",t)},expression:"formBankData.phone"}})],1)],1),e._v(" "),"2"==e.formBankData.credit_type?a("i-col",{attrs:{xs:24,sm:6,md:4}},[a("div",{staticStyle:{"margin-top":"1px","margin-left":"8px"}},[a("i-button",{staticClass:"color-primary font12",attrs:{type:"text","custom-icon":"iconfont icon-send",disabled:e.sendSmsDisabled||e.allDisabled},on:{click:e.submitCredit}},[e._v(e._s(e.sendSmsText)+"\n                                ")])],1)]):e._e()],1)],1):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"text-center font0",staticStyle:{"margin-top":"26px","margin-bottom":"16px"}},[a("i-button",{attrs:{size:"large"},on:{click:e.cancelEdit}},[e._v("返回列表")]),e._v(" "),"1"==e.formBankData.credit_type?a("i-button",{attrs:{type:"primary",disabled:e.preauthBtnDisabled||e.allDisabled,size:"large"},on:{click:e.submitCredit}},[e._v("发起预审\n                ")]):e._e()],1)])],1),e._v(" "),a("Modal",{attrs:{title:"授权信息","mask-closable":!1,closable:!1},model:{value:e.showMiniResModal,callback:function(t){e.showMiniResModal=t},expression:"showMiniResModal"}},[a("div",{staticStyle:{"margin-top":"-10px"}},[a("div",{staticClass:"font18"},[e._v("已发送短信至："),a("span",{staticClass:"color-primary"},[e._v(e._s(e._f("mobile")(e.formBankData.phone)))])]),e._v(" "),a("div",[e._v("请提醒用户尽快完成授权！返回订单列表后可查看授权进度~")])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"primary"},on:{click:e.closeMiniResModal}},[e._v("确 认")])],1)]),e._v(" "),a("Modal",{attrs:{title:"提示信息","mask-closable":!1,closable:!1},model:{value:e.showFailMiniResModal,callback:function(t){e.showFailMiniResModal=t},expression:"showFailMiniResModal"}},[a("div",{staticStyle:{"margin-top":"-10px"}},[a("div",[e._v("手机号未实名，您可以返回修改手机号或者采用发送短信至"),a("br"),a("span",{staticClass:"color-primary"},[e._v(e._s(e._f("mobile")(e.formBankData.phone)))]),e._v("，进行人脸验证的方式。\n            ")])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{on:{click:function(t){e.showFailMiniResModal=!1}}},[e._v("返回修改")]),e._v(" "),a("i-button",{attrs:{type:"primary"},on:{click:e.sendFaceSms}},[e._v("短信人脸")])],1)]),e._v(" "),a("Modal",{attrs:{"class-name":"vertical-center-modal",title:"图片预览",width:"60","footer-hide":""},model:{value:e.showPreviewModal,callback:function(t){e.showPreviewModal=t},expression:"showPreviewModal"}},[a("div",{staticClass:"text-center",staticStyle:{width:"100%",height:"400px"}},[a("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:e.previewUrl,alt:"图片预览地址"}})])]),e._v(" "),a("div",{staticClass:"simple-breadcrumb col-xs-11"},[a("router-link",{attrs:{to:"/order/list"}},[e._v("进件管理")]),e._v(" "),a("Icon",{attrs:{type:"ios-arrow-forward"}}),e._v(" "),a("span",[e._v("征信授权")])],1)],1)},staticRenderFns:[]};t.a=r}});
//# sourceMappingURL=11.f4bbb91ef9de54d5fba2.js.map