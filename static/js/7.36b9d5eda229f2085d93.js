webpackJsonp([7],{"8DSe":function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{attrs:{title:"选择产品",width:"650","mask-closable":!0,closable:!0,"footer-hide":""},on:{"on-cancel":t.closeModal,"on-visible-change":t.visibleChange},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("i-form",{ref:"formData",staticStyle:{height:"380px"},attrs:{model:t.formData,"label-width":120},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"search-input-con",staticStyle:{"margin-bottom":"10px","margin-top":"-10px"}},[t.formData.q?t._e():a("Button",{staticClass:"search-input-icon",attrs:{type:"text","custom-icon":"iconfont icon-search"},on:{click:t.inputChange}}),t._v(" "),a("i-input",{ref:"searchInput",attrs:{clearable:"",placeholder:"请搜索"},on:{"on-focus":t.inputFocus,"on-change":t.searchInputkeyup},model:{value:t.formData.q,callback:function(e){t.$set(t.formData,"q",e)},expression:"formData.q"}}),t._v(" "),t.searchQ?a("div",{staticClass:"bg-shadow product-search-res"},[a("ul",[t._l(t.tableListData,function(e,r){return a("li",{on:{click:function(a){return t.setSelectProd(e)}}},[a("span",{staticClass:"searchCon"},[t._v(t._s(e.productName))]),t._v(" "),a("span",{staticClass:"searchCon color696969"},[t._v("结算利率(%)："+t._s(e.rateDesc))]),t._v(" "),a("span",{staticClass:"searchCon color696969"},[t._v("贷款期限(期)："+t._s(e.loanPeriodDesc))])])}),t._v(" "),t.tableListData.length?t._e():a("li",{staticClass:"product-empty"},[t._v("未搜索到结果")])],2)]):t._e()],1),t._v(" "),t.searchQ?t._e():a("div",{staticClass:"product-table-box"},[a("i-table",{attrs:{height:"300",loading:t.loading,border:"",columns:t.columns,data:t.tableListData}}),t._v(" "),a("div",{staticClass:"margin-t-10"},[a("Page",{attrs:{size:"small",total:t.pager.total,"page-size":t.formData.pageSize,current:t.formData.currentPage,"page-size-opts":t.pager.Opts},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)],1)]),t._v(" "),a("div",{staticClass:"margin-t-10"},[a("div",{staticClass:"font0 clearfix"},[a("div",{staticClass:"hot-product-title"},[t._v("常用的产品\n            ")]),t._v(" "),a("div",{staticClass:"hot-product-con"},t._l(t.hotProductList,function(e,r){return a("span",{on:{click:function(a){return t.setSelectProd(e)}}},[t._v(t._s(e.productName))])}),0)])])],1)},staticRenderFns:[]};e.a=r},FqYt:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"car-default-panel"},[a("div",{staticClass:"car-picker",class:t.onlyLastModel?"only-last-model":""},[a("div",{staticClass:"car-brand-list"},[a("ul",{staticClass:"car-brand-letterList"},[t._l(t.carBrandLetterList,function(e,r){return[a("li",{class:t.selectCar.selectLetter==e?"active":"",on:{click:function(a){!t.onlyLastModel&&t.selectCarBrandLetter(e)}}},[t._v("\n                        "+t._s(e)+"\n                    ")])]})],2),t._v(" "),a("div",{ref:"brandPanel",staticClass:"car-panel-list car-brand-showList"},[t.carBrandResList&&t.carBrandResList.length?t._l(t.carBrandResList,function(e,r){return a("ul",{key:e.letter,ref:e.letter,refInFor:!0},[e.childList&&e.childList.length?t._l(e.childList,function(r,s){return[a("li",[a("a",{class:t.selectCar.carMasterBrandId==r.value?"active":"",attrs:{href:"javascript:;"},on:{click:function(a){!t.onlyLastModel&&t.selectCarBrand(r,e.letter)}}},[t._v("\n                                "+t._s(e.letter)+" "+t._s(r.name))])])]}):a("li",{staticClass:"car-panel-empty"},[a("div",{staticClass:"text-left withicon-empty-tip"},[a("Icon",{attrs:{type:"md-sad",size:"18"}}),t._v(" "),a("span",[t._v("暂无数据")])],1)])],2)}):a("ul",[a("li",{staticClass:"car-panel-empty"},[a("div",{staticClass:"text-left withicon-empty-tip"},[a("Icon",{attrs:{type:"md-sad",size:"18"}}),t._v(" "),a("span",[t._v("暂无数据")])],1)])])],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showCarSeriesList,expression:"showCarSeriesList"}],staticClass:"car-series-list animated",class:{slideInRight:t.showCarSeriesList}},[a("div",{staticClass:"car-panel-list car-series-showList"},[a("div",{staticClass:"car-panel-empty"},[t._v("全部车系")]),t._v(" "),t.carSeriesResList&&t.carSeriesResList.length?t._l(t.carSeriesResList,function(e,r){return a("ul",{key:e.entityId},[a("li",{staticClass:"car-panel-group-title"},[t._v(t._s(e.name))]),t._v(" "),e.modelDTOList&&e.modelDTOList.length?t._l(e.modelDTOList,function(r,s){return[a("li",[a("a",{class:t.selectCar.carModelId==r.entityId?"active":"",attrs:{href:"javascript:;"},on:{click:function(a){!t.onlyLastModel&&t.selectCarSeries(r,e)}}},[t._v(t._s(r.name))])])]}):a("li",{staticClass:"car-panel-empty"},[a("div",{staticClass:"text-left withicon-empty-tip"},[a("Icon",{attrs:{type:"md-sad",size:"18"}}),t._v(" "),a("span",[t._v("暂无数据")])],1)])],2)}):a("ul",[a("li",{staticClass:"car-panel-empty"},[a("div",{staticClass:"text-left withicon-empty-tip"},[a("Icon",{attrs:{type:"md-sad",size:"18"}}),t._v(" "),a("span",[t._v("暂无数据")])],1)])])],2)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showCarStyleList,expression:"showCarStyleList"}],staticClass:"car-style-list animated",class:{slideInRight:t.showCarStyleList}},[a("div",{staticClass:"car-panel-list car-style-showList"},[a("div",{staticClass:"car-panel-empty"},[t._v("全部车型")]),t._v(" "),a("ul",[t.carStyleResList&&t.carStyleResList.length?t._l(t.carStyleResList,function(e,r){return[a("li",[a("a",{class:t.selectCar.carStyleId==e.id?"active":"",attrs:{href:"javascript:;"},on:{click:function(a){return t.selectCarStyle(e)}}},[t._v(t._s(e.year+" "+e.title)+"\n                                "),a("span",{staticClass:"guideprice"},[a("span",{staticClass:"color696969"},[t._v("指导价(万元)：")]),a("span",{staticClass:"color1185EE"},[t._v(t._s(e.guidePrice))])])])])]}):a("li",{staticClass:"car-panel-empty"},[a("div",{staticClass:"text-left withicon-empty-tip"},[a("Icon",{attrs:{type:"md-sad",size:"18"}}),t._v(" "),a("span",[t._v("暂无数据")])],1)])],2)])])])])},staticRenderFns:[]};e.a=r},"GEN+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=m(a("aA9S")),s=m(a("rVsN")),o=m(a("lC5x")),i=m(a("J0Oq")),n=m(a("4YfN")),c=a("R4Sj"),l=m(a("wmTk")),d=m(a("Gts8")),u=m(a("dajN")),h=a("VSB1"),p=a("9ITj"),f=a("ZgZx");function m(t){return t&&t.__esModule?t:{default:t}}e.default={name:"orderPreaudit",directives:{Clickoutside:p.Clickoutside},components:{applySteps:l.default,carStylePicker:d.default,prodSingleSelectModal:u.default},data:function(){return{orderStep:1,account:this.$store.state.app.userInfo.userAccount,title:"预审",ruleValidate:f.validateRules.preauditPage,showResModal:!1,originalData:{},formData:{orderId:"",channelCode:"",channelName:"",mainName:"",reportSubject:"",reportSubjectName:"",productCode:"",productName:"",productVersion:"",productLoanPeriodDesc:"",productRateDesc:"",sysId:"2",traceId:"",carTypeId:"",carMasterBrandId:"",carMasterBrandName:"",carBrandId:"",carBrandName:"",carModelId:"",carModelName:"",carStyleId:"",carStyleName:"",carSeat:[],customerType:"",productModifyStatus:"",carModifyStatus:"",account:this.$store.state.app.userInfo.userAccount,equipmentrCode:"windows8",network:"wifi",operator:"移动"},fieldToForm:{channelCode:"dealerCode",channelName:"dealerSimpleName",mainName:"dealerName",reportSubject:"mainSubject",reportSubjectName:"mainSubjectDesc",productCode:"productCode",productName:"productName",productVersion:"productVersion",productLoanPeriodDesc:"productLoanPeriod",productRateDesc:"productRate",carTypeId:"carStyleId",carMasterBrandId:"carMasterBrandId",carMasterBrandName:"carMasterBrandName",carBrandId:"carBrandId",carBrandName:"carBrandName",carModelId:"carModelId",carModelName:"carModelName",carStyleId:"carStyleId",carStyleName:"carStyleName",carSeat:"carSeat",productModifyStatus:"productModifyStatus",carModifyStatus:"carModifyStatus"},showCarPanel:!1,showProdModal:!1,prodModalCreate:!1,DICT_channelList:[],inited:!1,orderId:"",isChange:"",isPersonal:"",isQy:""}},computed:{DICT_channelChildList:function(){var t=this,e=this.DICT_channelList.find(function(e){return e.channelCode==t.formData.channelCode});return e&&e.reportSubjectList?e.reportSubjectList:[]},carFullText:function(){return this.formData.carMasterBrandId&&this.formData.carBrandId&&this.formData.carModelId&&this.formData.carStyleId?[this.formData.carMasterBrandName,this.formData.carBrandName,this.formData.carModelName&&this.formData.carStyleName].join(" "):""},productInputDisabled:function(){return""==this.formData.channelCode||""==this.formData.reportSubject||this.isChange&&"1"!=this.formData.productModifyStatus},carInputDisabled:function(){return""==this.formData.channelCode||""==this.formData.reportSubject||""==this.formData.productCode||this.isChange&&!("1"==this.formData.carModifyStatus||"2"==this.formData.carModifyStatus)}},mounted:function(){var t=this;this.isChange="1"==this.$route.query.change,this.orderId=this.$route.query.orderNo,this.isPersonal=h.yx.isPersonal(this.$route.params.customerType),this.isQy=h.yx.isQy(this.$route.params.customerType),this.formData.traceId=this.orderId;var e=this.isPersonal||this.isQy?this.isChange&&!this.orderId?"未获取到订单号，请重新选择并进入":"":"未选择客户类型";if(e)return this.$Modal.error({title:"提示",content:e,onOk:function(){t.$router.back()}});this.title=this.isPersonal?"预审":this.isQy?"创建订单":"",this.isChange&&this.isPersonal?this.title="修改预审信息":this.isChange&&this.isQy&&(this.title="修改产品车型"),document.title="进件提报-"+this.title,this.formData.orderId=this.orderId||"",this.formData.customerType=this.$route.params.customerType,this.queryInit()},methods:(0,n.default)({},(0,c.mapMutations)("app",["showLoading","hideLoading"]),{go:function(t,e){this.$router.push({name:t,params:e})},fnReset:function(t){this.$refs[t].resetFields()},errorModal:function(t,e,a){var r={title:"提示",content:t,closable:!1,okText:a||"确 定",maskClosable:!1};e&&(r.onOk=e),this.$Modal.error(r)},queryInit:function(){var t=this;return(0,i.default)(o.default.mark(function e(){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.orderId||!t.isChange){e.next=11;break}return e.next=3,t.queryOrderPreauditInfo();case 3:if(a=e.sent){e.next=8;break}return e.abrupt("return",t.errorModal("没有该订单状态信息",function(){t.$router.back()}));case 8:t.setOrderInfoToForm(a);case 9:e.next=12;break;case 11:t.inited=!0;case 12:t.queryChannelList();case 13:case"end":return e.stop()}},e,t)}))()},backToList:function(){this.$router.replace({name:"orderList"})},goBack:function(){this.$router.back()},queryChannelList:function(){var t=this;this.showLoading(),this.$http.post(polarisserver+"/channel/list",{account:this.account}).then(function(e){t.hideLoading();var a=e.data;return a.success?a.data&&a.data.length?void(t.DICT_channelList=a.data||[]):t.errorModal("查询渠道信息无数据"):t.errorModal(a.errorMessage||"渠道信息请求失败")}).catch(function(e){t.hideLoading(),t.errorCatchModal("渠道信息请求出错：",e)})},setOrderInfoToForm:function(t){var e=this;if(!t)return this.errorModal("没有该订单状态信息",function(){e.$router.back()});if("1"!=t.productModifyStatus&&"1"!=t.carModifyStatus&&"2"!=t.carModifyStatus)return this.errorModal("该订单不允许修改产品和车型",function(){e.$router.back()});var a=this.fieldToForm;for(var r in a)this.formData[r]=t[a[r]]||"",this.originalData[r]=t[a[r]]||"";this.inited=!0},queryOrderPreauditInfo:function(){var t=this;return this.showLoading(),new s.default(function(e,a){t.$http.get(polarisserver+"/credit/getOrderModifyDetail/"+t.account+"/"+t.$route.query.orderNo).then(function(a){t.hideLoading();var r=a.data;if(!r.success)return t.errorModal(r.errorMessage||"订单状态 请求返回格式不对");var s=["level11","level12","level13","level14"].indexOf(r.data.orderSubStage);t.orderStep=s>-1?s+1:1,e(r.data)}).catch(function(e){t.hideLoading(),t.errorCatchModal("请求订单状态出错：",e,function(){t.$router.back()})})})},submitFn:function(t,e,a){var r=this;this.showLoading(),a=a||"post",e&&(e.saveFrom="PC");var o=this.isChange?"修改产品/车型":this.isQy?"创建企业订单":"发起预审";return new s.default(function(s,i){r.$http[a](t,e).then(function(t){r.hideLoading();var e=t.data;if(!e.success)return r.errorModal(e.errorMessage||o+"请求失败");s(e.data)}).catch(function(t){r.hideLoading(),r.errorCatchModal(o+"请求出错：",t),i(t)})})},saveFullPreChooseFn:function(){var t=this;this.loading=!0;var e=this;this.$refs.formData.validate(function(a){if(!a)return t.$Message.error("表单填写未通过，请检查!");(0,r.default)({},t.formData);if(e.isChange){var s={orderId:t.$route.query.orderNo,productCode:t.formData.productCode,productVersion:t.formData.productVersion,styleId:t.formData.carStyleId,sysId:t.formData.sysId,customerType:t.formData.customerType};t.submitFn(polarisserver+"/credit/updatePretrial",s,"post").then(function(e){t.$Modal.success({title:"提示",closable:!1,maskClosable:!1,content:"修改产品/车型成功",okText:"确认",onOk:function(){t.$router.back()}})})}if(!e.isQy&&!e.isChange){var o={orderId:t.orderId,traceId:t.formData.traceId,account:t.formData.account,channelCode:t.formData.channelCode,channelName:t.formData.channelName,mainName:t.formData.mainName,reportSubject:t.formData.reportSubject,reportSubjectName:t.formData.reportSubjectName,productCode:t.formData.productCode,productVersion:t.formData.productVersion,carTypeId:t.formData.carStyleId,sysId:t.formData.sysId,productLoanPeriodDesc:t.formData.productLoanPeriodDesc,productRateDesc:t.formData.productRateDesc};t.submitFn(polarisserver+"/credit/createPreTrial",o,"post").then(function(e){e.result&&(t.showResModal=!0)})}if(e.isQy&&!e.isChange){var i={channelCode:t.formData.channelCode,reportSubject:t.formData.reportSubject,reportSubjectName:t.formData.reportSubjectName,productCode:t.formData.productCode,productVersion:t.formData.productVersion,styleId:t.formData.carStyleId,sysId:t.formData.sysId,customerType:t.formData.customerType};t.submitFn(polarisserver+"/credit/initOrderInfo",i,"post").then(function(e){var a=e.orderNo;t.$Modal.success({title:"提示",closable:!1,maskClosable:!1,content:"<p>订单创建成功  ！订单号："+a+"</p>",okText:"编辑订单",cancelText:"返回列表",showCancel:!0,onOk:function(){t.$router.replace({name:"orderEdit",params:{orderNo:a,customerType:t.formData.customerType}})},onCancel:function(){t.backToList()}})})}})},selectProdResFn:function(t){if(!t||""==t.productCode)return this.errorModal("未选择产品！");this.formData.productCode==t.productCode&&this.formData.productVersion==t.version||(this.setProductData(t),this.clearCar()),this.showProdModal=!1},openProdModalFn:function(){if(this.productInputDisabled)return!1;this.showProdModal=!0,this.prodModalCreate=!0},clearProduct:function(){if(!this.inited)return!1;this.setProductData()},setProductData:function(t){t=t||{},this.formData.productCode=t.productCode||"",this.formData.productName=t.productName||"",this.formData.productVersion=t.version||"",this.formData.productLoanPeriodDesc=t.loanPeriodDesc||"",this.formData.productRateDesc=t.rateDesc||""},setCarData:function(t){console.log(t),t=t||{},this.formData.carTypeId=t.carStyleId||"",this.formData.carMasterBrandId=t.carMasterBrandId||"",this.formData.carMasterBrandName=t.carMasterBrandName||"",this.formData.carBrandId=t.carBrandId||"",this.formData.carBrandName=t.carBrandName||"",this.formData.carModelId=t.carModelId||"",this.formData.carModelName=t.carModelName||"",this.formData.carStyleId=t.carStyleId||"",this.formData.carStyleName=t.carStyleName||""},clearCar:function(){if(!this.inited)return!1;this.setCarData()},changeChannel:function(t){var e=this.DICT_channelList.find(function(e){return e.channelCode==t});if(e){this.formData.channelName=e.channelName,this.formData.mainName=e.mainName;var a=this.formData.reportSubject;if(a){var r=this.DICT_channelChildList.find(function(t){return t.reportSubject==a})||{};this.formData.reportSubject=r.reportSubject||"",this.formData.reportSubjectName=r.reportSubjectName||""}this.clearProduct(),this.clearCar()}},changeGszt:function(t){var e=this.DICT_channelChildList.find(function(e){return e.reportSubject==t})||{};this.formData.reportSubjectName=e.reportSubjectName||"",this.clearProduct(),this.clearCar()},changeProduct:function(){if(!this.inited)return!1;this.clearCar()},carpickerChange:function(t){this.showCarPanel=!1,this.setCarData(t)},outsideCarInputFn:function(){this.showCarPanel=!1},carstyleInputFocus:function(){this.carInputDisabled||(this.showCarPanel=!0)},carstyleInputBlur:function(){},carstyleInputChange:function(t){return!this.carInputDisabled&&(1==this.showCarPanel?(this.showCarPanel=!1,!1):void(this.showCarPanel=!0))}})}},Gts8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("bV8A"),s=a.n(r);for(var o in r)"default"!==o&&function(t){a.d(e,t,function(){return r[t]})}(o);var i=a("FqYt"),n=a("C7Lr")(s.a,i.a,!1,null,null,null);e.default=n.exports},"Y9/l":function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"margin-tb-10 margin-lr-20 layout-content"},[a("div",{staticClass:"margin-b-10"},[a("apply-steps",{attrs:{"active-step":t.orderStep,"first-text":t.title}})],1),t._v(" "),t.inited?a("div",{staticClass:"cm-panel",staticStyle:{"min-height":"620px"}},[a("i-form",{ref:"formData",attrs:{model:t.formData,"label-width":60,rules:t.ruleValidate}},[a("Row",[a("div",[a("Row",{staticClass:"font0"},[a("i-col",{attrs:{xs:16,sm:16,md:12,lg:10}},[a("Form-item",{attrs:{label:"选择渠道",prop:"channelCode"}},[a("i-select",{attrs:{type:"text",disabled:"1"==t.isChange,placeholder:"请选择"},on:{"on-change":t.changeChannel},model:{value:t.formData.channelCode,callback:function(e){t.$set(t.formData,"channelCode",e)},expression:"formData.channelCode"}},t._l(t.DICT_channelList,function(e,r){return a("i-option",{key:e.channelCode,attrs:{value:e.channelCode}},[t._v("\n                                        "+t._s(e.channelName)+"\n                                    ")])}),1)],1)],1),t._v(" "),a("i-col",{attrs:{xs:8,sm:8,md:6,lg:5}},[a("Form-item",{staticClass:"form-item-nolabel margin-l-5",attrs:{prop:"reportSubject"}},[a("i-select",{attrs:{type:"text",disabled:""==t.formData.channelCode||"1"==t.isChange,placeholder:"请选择"},on:{"on-change":t.changeGszt},model:{value:t.formData.reportSubject,callback:function(e){t.$set(t.formData,"reportSubject",e)},expression:"formData.reportSubject"}},t._l(t.DICT_channelChildList,function(e,r){return a("i-option",{key:e.reportSubject,attrs:{value:e.reportSubject}},[t._v("\n                                        "+t._s(e.reportSubjectName)+"\n                                    ")])}),1)],1)],1)],1)],1),t._v(" "),a("div",[a("Row",[a("i-col",{attrs:{xs:24,sm:16,md:12,lg:10}},[a("Form-item",{attrs:{label:"选择产品",prop:"productCode"}},[a("i-input",{staticStyle:{display:"none"},model:{value:t.formData.productCode,callback:function(e){t.$set(t.formData,"productCode",e)},expression:"formData.productCode"}}),t._v(" "),a("i-input",{attrs:{disabled:t.productInputDisabled,readonly:"",placeholder:"请选择"},on:{"on-change":t.changeProduct},nativeOn:{click:function(e){return t.openProdModalFn(e)}},model:{value:t.formData.productName,callback:function(e){t.$set(t.formData,"productName",e)},expression:"formData.productName"}},[a("Button",{staticClass:"self-append-btn",attrs:{slot:"append",icon:"ios-arrow-forward"},slot:"append"})],1)],1)],1)],1)],1),t._v(" "),a("div",[a("Row",[a("i-col",{attrs:{xs:24,sm:16,md:12,lg:10}},[a("FormItem",{directives:[{name:"clickoutside",rawName:"v-clickoutside:click",value:t.outsideCarInputFn,expression:"outsideCarInputFn",arg:"click"}],attrs:{label:"选择车型",prop:"carStyleId"}},[a("div",{staticClass:"carpicker-input-container"},[a("i-input",{staticStyle:{display:"none"},model:{value:t.formData.carTypeId,callback:function(e){t.$set(t.formData,"carTypeId",e)},expression:"formData.carTypeId"}}),t._v(" "),a("div",{staticClass:"search-input-con"},[a("Button",{staticClass:"search-input-icon",attrs:{type:"text","custom-icon":"iconfont icon-search"},nativeOn:{click:function(e){return t.carstyleInputChange()}}}),t._v(" "),a("i-input",{attrs:{disabled:t.carInputDisabled,readonly:"",placeholder:"请选择"},nativeOn:{click:function(e){return t.carstyleInputChange()}},model:{value:t.carFullText,callback:function(e){t.carFullText=e},expression:"carFullText"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showCarPanel,expression:"showCarPanel"}],staticClass:"carpicker-panel-container"},[a("car-style-picker",{attrs:{visible:""!=t.formData.productCode,carData:t.formData,productCode:t.formData.productCode,onlyLastModel:"2"==t.formData.carModifyStatus},on:{"on-change":t.carpickerChange}})],1)],1)])],1)],1),t._v(" "),a("Row",{staticClass:"text-center font0"},[a("i-button",{attrs:{size:"large"},on:{click:t.goBack}},[t._v("返回")]),t._v(" "),t.isChange||t.isQy?t._e():a("i-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.saveFullPreChooseFn()}}},[t._v("提交预审\n                        ")]),t._v(" "),t.isChange||t.isQy?a("i-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.saveFullPreChooseFn()}}},[t._v("下一步\n                        ")]):t._e()],1)],1)])],1)],1):t._e(),t._v(" "),a("Modal",{attrs:{title:"提示信息","mask-closable":!1,closable:!1},model:{value:t.showResModal,callback:function(e){t.showResModal=e},expression:"showResModal"}},[a("p",{staticClass:"font18",staticStyle:{"margin-top":"-10px"}},[t._v("订单"),a("span",{staticClass:"color-primary"},[t._v(t._s(t.orderId))]),t._v("提交预审成功！")]),t._v(" "),a("p",[t._v("返回订单列表后可查看预审进度~")]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"primary"},on:{click:t.backToList}},[t._v("确 定")])],1)]),t._v(" "),t.prodModalCreate?a("prod-single-select-modal",{attrs:{channelCode:t.formData.channelCode,reportSubject:t.formData.reportSubject},on:{"on-close":function(e){t.showProdModal=!1},"on-select":t.selectProdResFn},model:{value:t.showProdModal,callback:function(e){t.showProdModal=e},expression:"showProdModal"}}):t._e(),t._v(" "),a("div",{staticClass:"simple-breadcrumb col-xs-11"},[a("router-link",{attrs:{to:"/order/list"}},[t._v("进件管理")]),t._v(" "),a("Icon",{attrs:{type:"ios-arrow-forward"}}),t._v(" "),a("span",[t._v(t._s(t.title))])],1)],1)},staticRenderFns:[]};e.a=r},bV8A:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("VSB1");e.default={name:"carStylePicker",props:{visible:{default:!1},productCode:{default:""},onlyLastModel:{default:!1},carData:{default:{}}},data:function(){return{selectCar:{selectLetter:"",carMasterBrandId:"",carMasterBrandName:"",carBrandId:"",carBrandName:"",carModelId:"",carModelName:"",carStyleId:"",carStyleName:""},showCarBrandList:!1,showCarSeriesList:!1,showCarStyleList:!1,carBrandLetterList:[],carBrandResList:[],carSeriesResList:[],carStyleResList:[]}},computed:{},mounted:function(){this.$route.query.change&&this.queryCarBrandList()},methods:{selectCarBrandLetter:function(t){this.selectCar.selectLetter=t;var e=this.$refs.brandPanel,a=this.$refs[t][0].offsetTop;(0,r.scrollTo)(e,a,300)},selectCarBrand:function(t,e){var a=this;this.selectCar.selectLetter=e,this.selectCar.carMasterBrandId=t.value,this.selectCar.carMasterBrandName=t.name,this.selectCar.carBrandId=this.onlyLastModel?this.carData.carBrandId:"",this.selectCar.carBrandName=this.onlyLastModel?this.carData.carBrandName:"",this.selectCar.carModelId=this.onlyLastModel?this.carData.carModelId:"",this.selectCar.carModelName=this.onlyLastModel?this.carData.carModelName:"",this.selectCar.carStyleId=this.onlyLastModel?this.carData.carStyleId:"",this.selectCar.carStyleName=this.onlyLastModel?this.carData.carStyleName:"",this.showCarSeriesList=!!this.onlyLastModel,this.showCarStyleList=!!this.onlyLastModel;var r={id:t.value,productCode:this.productCode};this.$http.post(polarisserver+"/product/queryBrandList",r).then(function(t){var e=t.data;if(!e.success)return a.$Message.error(e.errorMessage||"车系请求失败");if(a.carSeriesResList=e.data||[],a.showCarSeriesList=!0,a.onlyLastModel){var r=a.carSeriesResList.find(function(t){return t.entityId==a.carData.carBrandId});if(r){var s=r.modelDTOList.find(function(t){return t.entityId==a.carData.carModelId});s&&a.selectCarSeries(s,r)}}}).catch(function(t){a.errorCatchModal("车系请求出错：",t)})},selectCarSeries:function(t,e){var a=this;this.selectCar.carBrandId=e.entityId,this.selectCar.carBrandName=e.name,this.selectCar.carModelId=t.entityId,this.selectCar.carModelName=t.name,this.selectCar.carStyleId=this.onlyLastModel?this.carData.carStyleId:"",this.selectCar.carStyleName=this.onlyLastModel?this.carData.carStyleName:"",this.showCarStyleList=!1;var r={id:t.entityId,productCode:this.productCode};this.$http.post(polarisserver+"/product/queryModelList",r).then(function(t){var e=t.data;if(!e.success)return a.$Message.error(e.errorMessage||"车型请求失败");a.carStyleResList=e.data||[],a.showCarStyleList=!0}).catch(function(t){a.errorCatchModal("车型请求出错：",t)})},selectCarStyle:function(t){this.selectCar.carStyleId=t.id,this.selectCar.carStyleName=t.title,this.selectCar.guidePrice=t.guidePrice,this.selectCar.year=t.year,this.showCarBrandList=!!this.onlyLastModel,this.showCarSeriesList=!!this.onlyLastModel,this.showCarStyleList=!!this.onlyLastModel,this.$emit("on-change",this.selectCar)},queryCarBrandList:function(){var t=this;if(this.carBrandLetterList.splice(0),this.carBrandResList.splice(0),this.carSeriesResList.splice(0),this.carStyleResList.splice(0),this.showCarBrandList=!1,this.showCarSeriesList=!1,this.showCarStyleList=!1,this.productCode){var e={productCode:this.productCode};this.productCode;this.$http.post(polarisserver+"/product/queryMasterBrandList",e).then(function(e){var a=e.data;if(!a.success)return t.$Message.error(a.errorMessage||"车辆品牌请求失败");var r=t.carBrandLetterList,s=a.data||[];s.sort(function(t,e){return t.letter>e.letter?1:-1});var o=[],i=void 0;s.forEach(function(e){var a=e.letter;r.indexOf(a)<0&&r.push(a);var s=o.find(function(t){return t.letter==a});s||(s={letter:a,childList:[]},o.push(s)),s.childList=s.childList||[];var n={name:e.title,value:e.id,letter:a};s.childList.push(n),t.onlyLastModel&&n.value===t.carData.carMasterBrandId&&(i=n)}),t.carBrandResList=o,i&&t.selectCarBrand(i,i.letter)}).catch(function(e){t.errorCatchModal("车辆品牌请求出错：",e)})}}},watch:{productCode:function(t){this.queryCarBrandList()}}}},dajN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("jSzZ"),s=a.n(r);for(var o in r)"default"!==o&&function(t){a.d(e,t,function(){return r[t]})}(o);var i=a("8DSe"),n=a("C7Lr")(s.a,i.a,!1,null,null,null);e.default=n.exports},jSzZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"prodSingleSelectModal",props:{channelCode:{default:""},reportSubject:{default:""},value:{default:!1},visible:{default:!1}},data:function(){var t=this;return{showModal:!1,showClassTab:!0,userAccount:this.$store.state.app.userInfo.userAccount,loading:!1,pager:{total:0,Opts:[10,20,50,100,200]},formData:{currentPage:1,pageSize:10,q:""},selectProdId:"",selectProdRow:{prodId:"",prodName:""},columns:[{title:"序号",width:55,align:"left",render:function(e,a){return e("span",a.index+(t.formData.currentPage-1)*t.formData.pageSize+1)}},{title:"操作",key:"oper",width:80,align:"center",render:function(e,a){var r=t;return e("a",{on:{click:function(){r.setSelectProd(a.row)}}},"选择")}},{title:"产品方案名称",key:"productName"},{title:"结算利率(%)",key:"rateDesc",width:110},{title:"贷款期限(期)",key:"loanPeriodDesc",width:110}],tableListData:[],hotProductList:[],searchResult:!1,timer:void 0}},computed:{searchQ:function(){return this.formData.q.replace(/(^\s*)|(\s*$)/g,"")}},mounted:function(){this.showModal=this.value},methods:{pageChange:function(t){this.formData.currentPage=t,this.queryList()},pageSizeChange:function(t){this.formData.currentPage=1,this.formData.pageSize=t,this.queryList()},queryList:function(){var t=this;this.selectProdId="",this.tableListData=[];var e=this.formData,a={channelCode:this.channelCode,reportSubject:this.reportSubject,productName:this.searchQ,current:e.currentPage,rowCount:e.pageSize,account:this.userAccount};this.loading=!0,this.$http.post(polarisserver+"/channel/product/page",a).then(function(e){t.loading=!1;var a=e.data;if(!a.success)return t.$Message.error(a.errorMessage||"产品列表请求失败");t.pager.total=a.data.total,t.tableListData=a.data.data||[]}).catch(function(e){t.loading=!1,t.errorCatchModal("产品列表请求出错：",e)})},queryhotProductList:function(){var t=this;this.$http.get(polarisserver+"/product/getCommonlyProductInfo/"+this.userAccount,{}).then(function(e){var a=e.data;if(!a.success)return t.$Message.error(a.errorMessage||"常用产品请求失败");t.hotProductList=a.data||[]}).catch(function(e){t.errorCatchModal("常用产品请求出错：",e)})},inputFocus:function(){this.showClassTab=""==this.searchQ},searchInputkeyup:function(){var t=this;null==this.searchQ||""==this.searchQ?(this.searchResult=!1,this.queryList()):(this.searchResult=!0,this.inputChange());var e=setTimeout(function(){t.$refs.searchInput.focus(),clearTimeout(e),e=void 0},200)},inputChange:function(){var t=this;this.searchQ&&this.searchQ.length>0&&(this.timer=setTimeout(function(){t.showClassTab=!1,t.formData.currentPage=1,t.queryList(),clearTimeout(t.timer),t.timer=void 0},100))},setSelectProd:function(t){this.selectProdRow=t,this.selectProdId=t.productCode,this.confirmProdChooseFn()},confirmProdChooseFn:function(){if(!this.selectProdRow||""==this.selectProdRow.selectProdId)return this.$Message.error("未选择产品！");this.$emit("on-select",this.selectProdRow)},closeModal:function(){this.$emit("on-close")},visibleChange:function(){1==this.showModal&&this.queryList(),this.queryhotProductList()}},watch:{value:function(t){t&&(this.formData.q=""),this.showModal=t},"formData.q":function(t,e){""==t&&this.queryList()}}}},vUGM:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("GEN+"),s=a.n(r);for(var o in r)"default"!==o&&function(t){a.d(e,t,function(){return r[t]})}(o);var i=a("Y9/l"),n=a("C7Lr")(s.a,i.a,!1,null,null,null);e.default=n.exports}});
//# sourceMappingURL=7.36b9d5eda229f2085d93.js.map